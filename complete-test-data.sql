-- TanaPOS v4 AI - å®Œæ•´æ¸¬è©¦è³‡æ–™ SQL è¼‰å…¥è…³æœ¬
-- é©ç”¨æ–¼ Supabase SQL ç·¨è¼¯å™¨ç›´æ¥åŸ·è¡Œ

-- æ¸…ç†ç¾æœ‰æ¸¬è©¦è³‡æ–™
DELETE FROM order_items WHERE order_id IN (
  SELECT id FROM orders WHERE restaurant_id = '11111111-1111-1111-1111-111111111111'
);
DELETE FROM orders WHERE restaurant_id = '11111111-1111-1111-1111-111111111111';
DELETE FROM products WHERE restaurant_id = '11111111-1111-1111-1111-111111111111';
DELETE FROM categories WHERE restaurant_id = '11111111-1111-1111-1111-111111111111';
DELETE FROM tables WHERE restaurant_id = '11111111-1111-1111-1111-111111111111';
DELETE FROM restaurants WHERE id = '11111111-1111-1111-1111-111111111111';

-- 1. æ’å…¥é¤å»³è³‡æ–™
INSERT INTO restaurants (
  id, name, address, phone, email, tax_rate, currency, timezone, 
  created_at, updated_at
) VALUES (
  '11111111-1111-1111-1111-111111111111',
  'TanaPOS ç¤ºç¯„é¤å»³',
  'å°åŒ—å¸‚ä¿¡ç¾©å€ä¿¡ç¾©è·¯äº”æ®µ7è™Ÿ',
  '02-1234-5678',
  'demo@tanapos.com',
  0.05,
  'TWD',
  'Asia/Taipei',
  NOW(),
  NOW()
);

-- 2. æ’å…¥åˆ†é¡è³‡æ–™
INSERT INTO categories (
  id, restaurant_id, name, description, sort_order, color, icon, 
  is_active, created_at, updated_at
) VALUES 
  ('cat-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', 'ä¸»é¤', 'ä¸»è¦é¤é»', 1, '#3B82F6', 'ğŸ½ï¸', true, NOW(), NOW()),
  ('cat-2222-2222-2222-222222222222', '11111111-1111-1111-1111-111111111111', 'é£²å“', 'å„å¼é£²å“', 2, '#10B981', 'ğŸ¥¤', true, NOW(), NOW()),
  ('cat-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', 'ç”œé»', 'ç²¾ç·»ç”œé»', 3, '#F59E0B', 'ğŸ°', true, NOW(), NOW()),
  ('cat-4444-4444-4444-444444444444', '11111111-1111-1111-1111-111111111111', 'å‰èœ', 'é–‹èƒƒå°èœ', 4, '#EF4444', 'ğŸ¥—', true, NOW(), NOW()),
  ('cat-5555-5555-5555-555555555555', '11111111-1111-1111-1111-111111111111', 'æ¹¯å“', 'æš–å¿ƒæ¹¯å“', 5, '#8B5CF6', 'ğŸ²', true, NOW(), NOW());

-- 3. æ’å…¥ç”¢å“è³‡æ–™
INSERT INTO products (
  id, restaurant_id, category_id, name, description, price, cost, 
  preparation_time, is_available, created_at, updated_at
) VALUES 
  -- ä¸»é¤
  ('prod-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', 'cat-1111-1111-1111-111111111111', 'æ‹›ç‰Œç‰›è‚‰éºµ', 'ç¶“å…¸å°å¼ç‰›è‚‰éºµï¼Œæ¹¯é ­æ¿ƒéƒ', 180.00, 80.00, 15, true, NOW(), NOW()),
  ('prod-2222-2222-2222-222222222222', '11111111-1111-1111-1111-111111111111', 'cat-1111-1111-1111-111111111111', 'æ»·è‚‰é£¯', 'å‚³çµ±å°å¼æ»·è‚‰é£¯', 80.00, 35.00, 8, true, NOW(), NOW()),
  ('prod-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', 'cat-1111-1111-1111-111111111111', 'ç‚’é£¯', 'é¦™å™´å™´ç‚’é£¯', 120.00, 50.00, 12, true, NOW(), NOW()),
  ('prod-0001-0001-0001-000000000001', '11111111-1111-1111-1111-111111111111', 'cat-1111-1111-1111-111111111111', 'å®®ä¿é›ä¸', 'ç¶“å…¸å·èœå®®ä¿é›ä¸', 150.00, 65.00, 12, true, NOW(), NOW()),
  ('prod-0002-0002-0002-000000000002', '11111111-1111-1111-1111-111111111111', 'cat-1111-1111-1111-111111111111', 'ç³–é†‹æ’éª¨', 'é…¸ç”œç³–é†‹æ’éª¨', 160.00, 70.00, 18, true, NOW(), NOW()),
  
  -- é£²å“
  ('prod-4444-4444-4444-444444444444', '11111111-1111-1111-1111-111111111111', 'cat-2222-2222-2222-222222222222', 'å¤æ—©å‘³ç´…èŒ¶', 'é¦™æ¿ƒå¤æ—©å‘³ç´…èŒ¶', 30.00, 8.00, 3, true, NOW(), NOW()),
  ('prod-5555-5555-5555-555555555555', '11111111-1111-1111-1111-111111111111', 'cat-2222-2222-2222-222222222222', 'æª¸æª¬æ±½æ°´', 'æ¸…çˆ½æª¸æª¬æ±½æ°´', 40.00, 12.00, 2, true, NOW(), NOW()),
  ('prod-0003-0003-0003-000000000003', '11111111-1111-1111-1111-111111111111', 'cat-2222-2222-2222-222222222222', 'çç å¥¶èŒ¶', 'ç¶“å…¸çç å¥¶èŒ¶', 55.00, 18.00, 5, true, NOW(), NOW()),
  ('prod-0004-0004-0004-000000000004', '11111111-1111-1111-1111-111111111111', 'cat-2222-2222-2222-222222222222', 'å†°å’–å•¡', 'é¦™é†‡å†°å’–å•¡', 65.00, 20.00, 4, true, NOW(), NOW()),
  
  -- ç”œé»
  ('prod-6666-6666-6666-666666666666', '11111111-1111-1111-1111-111111111111', 'cat-3333-3333-3333-333333333333', 'å·§å…‹åŠ›è›‹ç³•', 'æ¿ƒéƒå·§å…‹åŠ›è›‹ç³•', 120.00, 45.00, 5, true, NOW(), NOW()),
  ('prod-0005-0005-0005-000000000005', '11111111-1111-1111-1111-111111111111', 'cat-3333-3333-3333-333333333333', 'è‰è“è›‹ç³•', 'æ–°é®®è‰è“è›‹ç³•', 130.00, 50.00, 5, true, NOW(), NOW()),
  ('prod-0006-0006-0006-000000000006', '11111111-1111-1111-1111-111111111111', 'cat-3333-3333-3333-333333333333', 'ææ‹‰ç±³è˜‡', 'ç¾©å¼ææ‹‰ç±³è˜‡', 140.00, 55.00, 3, true, NOW(), NOW()),
  
  -- å‰èœ
  ('prod-7777-7777-7777-777777777777', '11111111-1111-1111-1111-111111111111', 'cat-4444-4444-4444-444444444444', 'æ¶¼æ‹Œå°é»ƒç“œ', 'æ¸…çˆ½æ¶¼æ‹Œå°é»ƒç“œ', 60.00, 20.00, 5, true, NOW(), NOW()),
  ('prod-0007-0007-0007-000000000007', '11111111-1111-1111-1111-111111111111', 'cat-4444-4444-4444-444444444444', 'çš®è›‹è±†è…', 'ç¶“å…¸çš®è›‹è±†è…', 80.00, 25.00, 5, true, NOW(), NOW()),
  ('prod-0008-0008-0008-000000000008', '11111111-1111-1111-1111-111111111111', 'cat-4444-4444-4444-444444444444', 'æ¶¼æ‹Œæµ·å¸¶çµ²', 'çˆ½è„†æ¶¼æ‹Œæµ·å¸¶çµ²', 70.00, 22.00, 5, true, NOW(), NOW()),
  
  -- æ¹¯å“
  ('prod-0009-0009-0009-000000000009', '11111111-1111-1111-1111-111111111111', 'cat-5555-5555-5555-555555555555', 'é…¸è¾£æ¹¯', 'ç¶“å…¸é…¸è¾£æ¹¯', 60.00, 18.00, 8, true, NOW(), NOW()),
  ('prod-0010-0010-0010-000000000010', '11111111-1111-1111-1111-111111111111', 'cat-5555-5555-5555-555555555555', 'ç‰ç±³æ¿ƒæ¹¯', 'é¦™æ¿ƒç‰ç±³æ¿ƒæ¹¯', 50.00, 15.00, 6, true, NOW(), NOW()),
  ('prod-0011-0011-0011-000000000011', '11111111-1111-1111-1111-111111111111', 'cat-5555-5555-5555-555555555555', 'è›¤èœŠæ¹¯', 'é®®ç¾è›¤èœŠæ¹¯', 90.00, 35.00, 10, true, NOW(), NOW());

-- 4. æ’å…¥æ¡Œå°è³‡æ–™
INSERT INTO tables (
  id, restaurant_id, table_number, name, capacity, status, 
  created_at, updated_at
) VALUES 
  ('table-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', 1, 'A01', 4, 'available', NOW(), NOW()),
  ('table-2222-2222-2222-222222222222', '11111111-1111-1111-1111-111111111111', 2, 'A02', 4, 'available', NOW(), NOW()),
  ('table-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', 3, 'A03', 6, 'occupied', NOW(), NOW()),
  ('table-4444-4444-4444-444444444444', '11111111-1111-1111-1111-111111111111', 4, 'B01', 2, 'available', NOW(), NOW()),
  ('table-5555-5555-5555-555555555555', '11111111-1111-1111-1111-111111111111', 5, 'B02', 4, 'cleaning', NOW(), NOW()),
  ('table-6666-6666-6666-666666666666', '11111111-1111-1111-1111-111111111111', 6, 'B03', 8, 'available', NOW(), NOW()),
  ('table-7777-7777-7777-777777777777', '11111111-1111-1111-1111-111111111111', 7, 'C01', 4, 'available', NOW(), NOW()),
  ('table-8888-8888-8888-888888888888', '11111111-1111-1111-1111-111111111111', 8, 'C02', 6, 'available', NOW(), NOW());

-- 5. æ’å…¥ç¯„ä¾‹è¨‚å–®
INSERT INTO orders (
  id, restaurant_id, table_id, order_number, customer_name, customer_phone,
  subtotal, tax_amount, total_amount, status, payment_status, order_type,
  created_at, updated_at
) VALUES 
  ('order-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', 'table-3333-3333-3333-333333333333', 'ORD-001', 'ç‹å°æ˜', '0912345678', 260.00, 13.00, 273.00, 'preparing', 'unpaid', 'dine_in', NOW(), NOW()),
  ('order-2222-2222-2222-222222222222', '11111111-1111-1111-1111-111111111111', 'table-1111-1111-1111-111111111111', 'ORD-002', 'æå°è¯', '0987654321', 200.00, 10.00, 210.00, 'ready', 'paid', 'dine_in', NOW(), NOW()),
  ('order-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', 'table-7777-7777-7777-777777777777', 'ORD-003', 'å¼µå¤§åŒ', '0923456789', 315.00, 15.75, 330.75, 'served', 'paid', 'dine_in', NOW(), NOW());

-- 6. æ’å…¥è¨‚å–®é …ç›®
INSERT INTO order_items (
  id, order_id, product_id, product_name, quantity, unit_price, total_price, 
  status, created_at, updated_at
) VALUES 
  -- è¨‚å–®1çš„é …ç›® (preparing)
  ('item-1111-1111-1111-111111111111', 'order-1111-1111-1111-111111111111', 'prod-1111-1111-1111-111111111111', 'æ‹›ç‰Œç‰›è‚‰éºµ', 1, 180.00, 180.00, 'preparing', NOW(), NOW()),
  ('item-2222-2222-2222-222222222222', 'order-1111-1111-1111-111111111111', 'prod-2222-2222-2222-222222222222', 'æ»·è‚‰é£¯', 1, 80.00, 80.00, 'preparing', NOW(), NOW()),
  
  -- è¨‚å–®2çš„é …ç›® (ready)
  ('item-3333-3333-3333-333333333333', 'order-2222-2222-2222-222222222222', 'prod-3333-3333-3333-333333333333', 'ç‚’é£¯', 1, 120.00, 120.00, 'ready', NOW(), NOW()),
  ('item-4444-4444-4444-444444444444', 'order-2222-2222-2222-222222222222', 'prod-2222-2222-2222-222222222222', 'æ»·è‚‰é£¯', 1, 80.00, 80.00, 'ready', NOW(), NOW()),
  
  -- è¨‚å–®3çš„é …ç›® (served)
  ('item-5555-5555-5555-555555555555', 'order-3333-3333-3333-333333333333', 'prod-0001-0001-0001-000000000001', 'å®®ä¿é›ä¸', 1, 150.00, 150.00, 'served', NOW(), NOW()),
  ('item-6666-6666-6666-666666666666', 'order-3333-3333-3333-333333333333', 'prod-0002-0002-0002-000000000002', 'ç³–é†‹æ’éª¨', 1, 160.00, 160.00, 'served', NOW(), NOW()),
  ('item-7777-7777-7777-777777777777', 'order-3333-3333-3333-333333333333', 'prod-0009-0009-0009-000000000009', 'é…¸è¾£æ¹¯', 1, 60.00, 60.00, 'served', NOW(), NOW());

-- 7. é©—è­‰è¼‰å…¥çµæœ
SELECT 
  'restaurants' as table_name, 
  COUNT(*) as count 
FROM restaurants 
WHERE id = '11111111-1111-1111-1111-111111111111'

UNION ALL

SELECT 
  'categories' as table_name, 
  COUNT(*) as count 
FROM categories 
WHERE restaurant_id = '11111111-1111-1111-1111-111111111111'

UNION ALL

SELECT 
  'products' as table_name, 
  COUNT(*) as count 
FROM products 
WHERE restaurant_id = '11111111-1111-1111-1111-111111111111'

UNION ALL

SELECT 
  'tables' as table_name, 
  COUNT(*) as count 
FROM tables 
WHERE restaurant_id = '11111111-1111-1111-1111-111111111111'

UNION ALL

SELECT 
  'orders' as table_name, 
  COUNT(*) as count 
FROM orders 
WHERE restaurant_id = '11111111-1111-1111-1111-111111111111'

UNION ALL

SELECT 
  'order_items' as table_name, 
  COUNT(*) as count 
FROM order_items 
WHERE order_id IN (
    SELECT id FROM orders WHERE restaurant_id = '11111111-1111-1111-1111-111111111111'
);
