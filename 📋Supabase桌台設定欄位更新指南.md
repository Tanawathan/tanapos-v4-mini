# ğŸ“‹ Supabase æ¡Œå°è¨­å®šæ¬„ä½æ›´æ–°æŒ‡å—

## ğŸ¯ ç›®çš„
ç‚ºäº†æ”¯æ´æ¡Œå°åƒæ•¸è¨­å®šåŠŸèƒ½ï¼Œéœ€è¦åœ¨ Supabase æ§åˆ¶å°ä¸­æ‰‹å‹•æ·»åŠ ä¸€äº›æ–°æ¬„ä½åˆ°é¤å»³è¨­å®šä¸­ã€‚

---

## âš ï¸ é‡è¦æé†’
åœ¨ä½¿ç”¨æ–°çš„æ¡Œå°è¨­å®šåŠŸèƒ½ä¹‹å‰ï¼Œè«‹æŒ‰ç…§ä»¥ä¸‹æ­¥é©Ÿæ“ä½œï¼š

---

## ğŸ”§ æ‰‹å‹•æ“ä½œæ­¥é©Ÿ

### æ­¥é©Ÿ 1: ç™»å…¥ Supabase æ§åˆ¶å°
1. å‰å¾€ https://supabase.com
2. ç™»å…¥æ‚¨çš„å¸³è™Ÿ
3. é¸æ“‡å°ˆæ¡ˆ: `arksfwmcmwnyxvlcpskm`

### æ­¥é©Ÿ 2: é€²å…¥è³‡æ–™è¡¨ç·¨è¼¯å™¨
1. åœ¨å·¦å´é¸å–®é»æ“Š "Table Editor"
2. æ‰¾åˆ°ä¸¦é»æ“Š `restaurants` è³‡æ–™è¡¨

### æ­¥é©Ÿ 3: æª¢æŸ¥ settings æ¬„ä½
1. æŸ¥çœ‹æ˜¯å¦æœ‰ `settings` æ¬„ä½ (é¡å‹: jsonb)
2. å¦‚æœæ²’æœ‰ï¼Œè«‹æ–°å¢æ­¤æ¬„ä½ï¼š
   - æ¬„ä½åç¨±: `settings`
   - è³‡æ–™é¡å‹: `jsonb`
   - é è¨­å€¼: `{}`
   - å…è¨± NULL: æ˜¯

---

## ğŸ“Š è³‡æ–™çµæ§‹èªªæ˜

### settings æ¬„ä½æ‡‰åŒ…å«ä»¥ä¸‹çµæ§‹ï¼š

```json
{
  "table_settings": {
    "general": {
      "default_capacity": 4,
      "default_cleaning_duration": 15,
      "auto_assignment_enabled": true,
      "qr_code_enabled": true
    },
    "zones": {
      "available_zones": ["å¤§å»³", "VIPå€", "åŒ…å»‚", "æˆ¶å¤–"],
      "default_zone": "å¤§å»³"
    },
    "features": {
      "available_features": ["çª—é‚Š", "å®‰éœ", "å……é›»æ’åº§", "å…’ç«¥å‹å–„", "è¼ªæ¤…å‹å–„", "åŒ…å»‚"],
      "default_features": []
    },
    "ai_settings": {
      "auto_assignment": true,
      "priority_scoring": true,
      "smart_recommendations": false
    }
  }
}
```

---

## ğŸ§ª æ¸¬è©¦æ­¥é©Ÿ

### 1. æª¢æŸ¥ç¾æœ‰è³‡æ–™
åŸ·è¡Œä»¥ä¸‹æŸ¥è©¢ä¾†æª¢æŸ¥ç¾æœ‰è¨­å®šï¼š
```sql
SELECT id, name, settings 
FROM restaurants 
WHERE settings IS NOT NULL;
```

### 2. åˆå§‹åŒ–é è¨­è¨­å®š
å¦‚æœæŸå€‹é¤å»³çš„ settings ç‚ºç©ºï¼Œå¯ä»¥æ‰‹å‹•è¨­å®šï¼š
```sql
UPDATE restaurants 
SET settings = '{
  "table_settings": {
    "general": {
      "default_capacity": 4,
      "default_cleaning_duration": 15,
      "auto_assignment_enabled": true,
      "qr_code_enabled": true
    },
    "zones": {
      "available_zones": ["å¤§å»³", "VIPå€", "åŒ…å»‚", "æˆ¶å¤–"],
      "default_zone": "å¤§å»³"
    },
    "features": {
      "available_features": ["çª—é‚Š", "å®‰éœ", "å……é›»æ’åº§", "å…’ç«¥å‹å–„", "è¼ªæ¤…å‹å–„", "åŒ…å»‚"],
      "default_features": []
    },
    "ai_settings": {
      "auto_assignment": true,
      "priority_scoring": true,
      "smart_recommendations": false
    }
  }
}'::jsonb
WHERE id = 'your_restaurant_id_here';
```

### 3. é©—è­‰æ¡Œå°è³‡æ–™è¡¨
ç¢ºä¿ `tables` è³‡æ–™è¡¨æœ‰å¿…è¦çš„æ¬„ä½ï¼š
```sql
SELECT column_name, data_type 
FROM information_schema.columns 
WHERE table_name = 'tables' 
AND table_schema = 'public'
ORDER BY column_name;
```

---

## âœ… åŠŸèƒ½é©—è­‰æ¸…å–®

å®Œæˆè¨­å®šå¾Œï¼Œè«‹é©—è­‰ä»¥ä¸‹åŠŸèƒ½ï¼š

### åœ¨æ¡Œå°è¨­å®šé é¢ä¸­ï¼š
- [ ] å¯ä»¥çœ‹åˆ°æ¡Œå°ç¸½è¦½çµ±è¨ˆ
- [ ] å¯ä»¥ç·¨è¼¯å…¨åŸŸè¨­å®š
- [ ] å¯ä»¥æ–°å¢/ç§»é™¤å€åŸŸ
- [ ] å¯ä»¥æ–°å¢/ç§»é™¤æ¡Œå°ç‰¹è‰²
- [ ] å¯ä»¥æ‰¹é‡æ›´æ–°æ¡Œå°è¨­å®š
- [ ] å¯ä»¥ç·¨è¼¯å€‹åˆ¥æ¡Œå°åƒæ•¸
- [ ] å„²å­˜å¾Œè¨­å®šèƒ½æ­£ç¢ºä¿å­˜åˆ°è³‡æ–™åº«

### åœ¨å…¶ä»–é é¢ä¸­ï¼š
- [ ] æ¡Œå°ç®¡ç†é é¢èƒ½æ­£å¸¸é‹ä½œ
- [ ] é ç´„ç³»çµ±èƒ½æ­£ç¢ºä½¿ç”¨æ¡Œå°è³‡è¨Š
- [ ] KDS ç³»çµ±èƒ½æ­£ç¢ºé¡¯ç¤ºæ¡Œå°è³‡è¨Š

---

## ğŸš¨ ç–‘é›£æ’è§£

### å•é¡Œ 1: ç„¡æ³•å„²å­˜è¨­å®š
**å¯èƒ½åŸå› **: settings æ¬„ä½ä¸å­˜åœ¨æˆ–æ¬Šé™ä¸è¶³
**è§£æ±ºæ–¹æ¡ˆ**: æª¢æŸ¥ RLS æ”¿ç­–ä¸¦ç¢ºèª settings æ¬„ä½å­˜åœ¨

### å•é¡Œ 2: è¼‰å…¥æ¡Œå°å¤±æ•—
**å¯èƒ½åŸå› **: è³‡æ–™è¡¨æ¬Šé™è¨­å®šå•é¡Œ
**è§£æ±ºæ–¹æ¡ˆ**: 
```sql
-- ç¢ºèª RLS æ”¿ç­–
SELECT * FROM pg_policies WHERE tablename = 'tables';

-- å¦‚éœ€è¦ï¼Œå¯ä»¥æš«æ™‚åœç”¨ RLS é€²è¡Œæ¸¬è©¦
ALTER TABLE public.tables DISABLE ROW LEVEL SECURITY;
```

### å•é¡Œ 3: ç„¡æ³•æ›´æ–°å€‹åˆ¥æ¡Œå°
**å¯èƒ½åŸå› **: æ¡Œå° ID ä¸æ­£ç¢ºæˆ–è³‡æ–™æ ¼å¼å•é¡Œ
**è§£æ±ºæ–¹æ¡ˆ**: æª¢æŸ¥æ¡Œå° ID æ˜¯å¦å­˜åœ¨ä¸”æ ¼å¼æ­£ç¢º

---

## ğŸ“ æ³¨æ„äº‹é …

1. **å‚™ä»½è³‡æ–™**: åœ¨é€²è¡Œä»»ä½•è³‡æ–™åº«ä¿®æ”¹å‰ï¼Œè«‹å…ˆå‚™ä»½é‡è¦è³‡æ–™
2. **æ¸¬è©¦ç’°å¢ƒ**: å»ºè­°å…ˆåœ¨æ¸¬è©¦ç’°å¢ƒä¸­é©—è­‰æ‰€æœ‰åŠŸèƒ½
3. **æ¬Šé™è¨­å®š**: ç¢ºä¿æ‡‰ç”¨ç¨‹å¼æœ‰é©ç•¶çš„è³‡æ–™åº«å­˜å–æ¬Šé™
4. **æ¬„ä½é©—è­‰**: æ–°å¢æ¬„ä½æ™‚è¦æ³¨æ„è³‡æ–™é¡å‹å’Œç´„æŸæ¢ä»¶

---

## ğŸ“ æ”¯æ´

å¦‚æœåœ¨è¨­å®šéç¨‹ä¸­é‡åˆ°å•é¡Œï¼Œè«‹æª¢æŸ¥ï¼š
1. Supabase æ§åˆ¶å°çš„éŒ¯èª¤è¨Šæ¯
2. ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·çš„ç¶²è·¯è«‹æ±‚
3. æ‡‰ç”¨ç¨‹å¼æ§åˆ¶å°çš„éŒ¯èª¤æ—¥èªŒ

---

**ğŸŠ å®Œæˆè¨­å®šå¾Œï¼Œæ‚¨çš„æ¡Œå°ç®¡ç†ç³»çµ±å°‡å…·å‚™å®Œæ•´çš„åƒæ•¸è¨­å®šåŠŸèƒ½ï¼**
