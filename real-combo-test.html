
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>真實套餐數據測試</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 p-8">
    <div class="max-w-6xl mx-auto">
        <h1 class="text-3xl font-bold text-gray-900 mb-8">🎯 真實套餐數據測試</h1>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <h3 class="text-xl font-semibold text-gray-900 mb-3">泰式經典套餐</h3>
                <p class="text-gray-600 text-sm mb-4">包含主餐、沙拉和甜點的完整套餐，體驗正宗泰式風味</p>
                
                <div class="space-y-2 mb-4">
                    <div class="flex justify-between">
                        <span class="text-gray-600">基礎價格</span>
                        <span class="font-semibold">NT$ 350</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">價格範圍</span>
                        <span class="text-orange-600 font-semibold">NT$ 320 - 480</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">製作時間</span>
                        <span>25 分鐘</span>
                    </div>
                </div>
                
                <div class="border-t pt-4">
                    <h4 class="font-medium text-gray-900 mb-2">選擇規則 (3)</h4>
                    <div class="space-y-1">
                        
                        <div class="text-xs text-gray-600">
                            • 主餐選擇: 1-1 選項
                            <span class="text-red-500">*</span>
                        </div>
                        
                        <div class="text-xs text-gray-600">
                            • 沙拉選擇: 1-1 選項
                            <span class="text-red-500">*</span>
                        </div>
                        
                        <div class="text-xs text-gray-600">
                            • 甜點選擇: 1-1 選項
                            <span class="text-red-500">*</span>
                        </div>
                        
                    </div>
                </div>
                
                <div class="mt-4 pt-4 border-t">
                    <button 
                        onclick="showComboDetails('3b5857b2-a782-48a0-97d6-95f85f158a4f')"
                        class="w-full px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 text-sm"
                    >
                        查看詳細規則
                    </button>
                </div>
            </div>
              
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <h3 class="text-xl font-semibold text-gray-900 mb-3">商務午餐套餐</h3>
                <p class="text-gray-600 text-sm mb-4">快速便捷的商務午餐選擇，營養均衡</p>
                
                <div class="space-y-2 mb-4">
                    <div class="flex justify-between">
                        <span class="text-gray-600">基礎價格</span>
                        <span class="font-semibold">NT$ 280</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">價格範圍</span>
                        <span class="text-orange-600 font-semibold">NT$ 260 - 360</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">製作時間</span>
                        <span>18 分鐘</span>
                    </div>
                </div>
                
                <div class="border-t pt-4">
                    <h4 class="font-medium text-gray-900 mb-2">選擇規則 (2)</h4>
                    <div class="space-y-1">
                        
                        <div class="text-xs text-gray-600">
                            • 主餐選擇: 1-1 選項
                            <span class="text-red-500">*</span>
                        </div>
                        
                        <div class="text-xs text-gray-600">
                            • 額外配菜: 0-2 選項
                            <span class="text-gray-400">(可選)</span>
                        </div>
                        
                    </div>
                </div>
                
                <div class="mt-4 pt-4 border-t">
                    <button 
                        onclick="showComboDetails('a2cdbe0c-d58c-42d3-ba7a-8e9148d6502f')"
                        class="w-full px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 text-sm"
                    >
                        查看詳細規則
                    </button>
                </div>
            </div>
              
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <h3 class="text-xl font-semibold text-gray-900 mb-3">家庭分享套餐</h3>
                <p class="text-gray-600 text-sm mb-4">適合2-3人分享的豪華套餐組合</p>
                
                <div class="space-y-2 mb-4">
                    <div class="flex justify-between">
                        <span class="text-gray-600">基礎價格</span>
                        <span class="font-semibold">NT$ 650</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">價格範圍</span>
                        <span class="text-orange-600 font-semibold">NT$ 610 - 1040</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">製作時間</span>
                        <span>35 分鐘</span>
                    </div>
                </div>
                
                <div class="border-t pt-4">
                    <h4 class="font-medium text-gray-900 mb-2">選擇規則 (3)</h4>
                    <div class="space-y-1">
                        
                        <div class="text-xs text-gray-600">
                            • 主餐選擇: 2-3 選項
                            <span class="text-red-500">*</span>
                        </div>
                        
                        <div class="text-xs text-gray-600">
                            • 配菜選擇: 1-3 選項
                            <span class="text-red-500">*</span>
                        </div>
                        
                        <div class="text-xs text-gray-600">
                            • 甜點選擇: 1-2 選項
                            <span class="text-gray-400">(可選)</span>
                        </div>
                        
                    </div>
                </div>
                
                <div class="mt-4 pt-4 border-t">
                    <button 
                        onclick="showComboDetails('6fabe20e-2ef3-4273-9f8e-07030b43b3c9')"
                        class="w-full px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 text-sm"
                    >
                        查看詳細規則
                    </button>
                </div>
            </div>
              
        </div>
        
        <!-- 詳細資訊 Modal -->
        <div id="detailModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4">
            <div class="bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-auto">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-bold" id="modalTitle">套餐詳細</h2>
                        <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                    </div>
                    <div id="modalContent"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const comboData = [
  {
    "combo": {
      "id": "3b5857b2-a782-48a0-97d6-95f85f158a4f",
      "restaurant_id": "11111111-1111-1111-1111-111111111111",
      "category_id": null,
      "name": "泰式經典套餐",
      "description": "包含主餐、沙拉和甜點的完整套餐，體驗正宗泰式風味",
      "price": 350,
      "cost": 0,
      "combo_type": "selectable",
      "image_url": null,
      "sort_order": 1,
      "is_available": true,
      "is_active": true,
      "preparation_time": 25,
      "availability_start": null,
      "availability_end": null,
      "available_days": null,
      "min_items": 1,
      "max_items": null,
      "discount_type": "fixed",
      "discount_value": 0,
      "ai_popularity_score": 0.5,
      "ai_recommended": false,
      "created_at": "2025-08-06T05:08:39.711867+00:00",
      "updated_at": "2025-08-06T05:08:39.711867+00:00",
      "metadata": null
    },
    "rules": [
      {
        "id": "94b9cab4-8d24-4f17-87bb-bfc1faec9aea",
        "combo_id": "3b5857b2-a782-48a0-97d6-95f85f158a4f",
        "category_id": null,
        "selection_name": "主餐選擇",
        "description": "請選擇一道主餐",
        "min_selections": 1,
        "max_selections": 1,
        "is_required": true,
        "display_order": 1,
        "created_at": "2025-08-06T05:08:39.956168+00:00",
        "updated_at": "2025-08-06T05:08:39.956168+00:00",
        "combo_selection_options": [
          {
            "id": "4119e543-a3d7-4285-a6d5-775380989ec0",
            "rule_id": "94b9cab4-8d24-4f17-87bb-bfc1faec9aea",
            "products": {
              "id": "95942080-0f97-47ed-807c-9a403d3cfaa2",
              "name": "打拋豬飯",
              "price": 220
            },
            "created_at": "2025-08-06T05:08:40.153282+00:00",
            "is_default": true,
            "product_id": "95942080-0f97-47ed-807c-9a403d3cfaa2",
            "sort_order": 1,
            "additional_price": 0
          },
          {
            "id": "96eb4196-b06f-4c53-a4f5-a52947c5d7a3",
            "rule_id": "94b9cab4-8d24-4f17-87bb-bfc1faec9aea",
            "products": {
              "id": "3b9ca17d-ca62-4327-8eb6-9c2605deba10",
              "name": "雞肉帕泰",
              "price": 190
            },
            "created_at": "2025-08-06T05:08:40.153282+00:00",
            "is_default": false,
            "product_id": "3b9ca17d-ca62-4327-8eb6-9c2605deba10",
            "sort_order": 2,
            "additional_price": -20
          },
          {
            "id": "e7d08f0a-9897-4fea-90d0-f24ef1142877",
            "rule_id": "94b9cab4-8d24-4f17-87bb-bfc1faec9aea",
            "products": {
              "id": "2c5fc386-c13c-4f04-8ef7-010c8173c30e",
              "name": "打拋雞飯",
              "price": 220
            },
            "created_at": "2025-08-06T05:08:40.153282+00:00",
            "is_default": false,
            "product_id": "2c5fc386-c13c-4f04-8ef7-010c8173c30e",
            "sort_order": 3,
            "additional_price": 0
          },
          {
            "id": "feb53adc-197d-483c-86cf-1ab4e159288d",
            "rule_id": "94b9cab4-8d24-4f17-87bb-bfc1faec9aea",
            "products": {
              "id": "1414e7fc-82a6-4175-80ca-f89891bba68a",
              "name": "魚露炸腿飯",
              "price": 250
            },
            "created_at": "2025-08-06T05:08:40.153282+00:00",
            "is_default": false,
            "product_id": "1414e7fc-82a6-4175-80ca-f89891bba68a",
            "sort_order": 4,
            "additional_price": 30
          },
          {
            "id": "25895cca-7540-4c0b-b9a2-678fa206fc90",
            "rule_id": "94b9cab4-8d24-4f17-87bb-bfc1faec9aea",
            "products": {
              "id": "22222222-3333-4444-5555-666666666662",
              "name": "炭烤雞胸",
              "price": 480
            },
            "created_at": "2025-08-06T05:08:40.153282+00:00",
            "is_default": false,
            "product_id": "22222222-3333-4444-5555-666666666662",
            "sort_order": 5,
            "additional_price": 80
          }
        ]
      },
      {
        "id": "7dd0895b-87be-4f76-9341-1e821dfd270c",
        "combo_id": "3b5857b2-a782-48a0-97d6-95f85f158a4f",
        "category_id": null,
        "selection_name": "沙拉選擇",
        "description": "請選擇一道沙拉",
        "min_selections": 1,
        "max_selections": 1,
        "is_required": true,
        "display_order": 2,
        "created_at": "2025-08-06T05:08:39.956168+00:00",
        "updated_at": "2025-08-06T05:08:39.956168+00:00",
        "combo_selection_options": [
          {
            "id": "38369210-cf25-48c6-a5ca-29c5608cb05e",
            "rule_id": "7dd0895b-87be-4f76-9341-1e821dfd270c",
            "products": {
              "id": "75d95537-b6d0-45eb-9e18-e15464b83d7e",
              "name": "涼拌青木瓜",
              "price": 120
            },
            "created_at": "2025-08-06T05:08:40.153282+00:00",
            "is_default": true,
            "product_id": "75d95537-b6d0-45eb-9e18-e15464b83d7e",
            "sort_order": 1,
            "additional_price": 0
          },
          {
            "id": "e78e1d09-f78d-40ae-93d6-1108945c9bbd",
            "rule_id": "7dd0895b-87be-4f76-9341-1e821dfd270c",
            "products": {
              "id": "2ce2edcd-b8ce-4c29-8d22-4acb390ec1f3",
              "name": "Laab 肉末萵苣包",
              "price": 120
            },
            "created_at": "2025-08-06T05:08:40.153282+00:00",
            "is_default": false,
            "product_id": "2ce2edcd-b8ce-4c29-8d22-4acb390ec1f3",
            "sort_order": 2,
            "additional_price": 0
          },
          {
            "id": "179a034c-9dc3-4719-a223-a75be6f3237b",
            "rule_id": "7dd0895b-87be-4f76-9341-1e821dfd270c",
            "products": {
              "id": "22222222-3333-4444-5555-666666666661",
              "name": "凱薩沙拉",
              "price": 280
            },
            "created_at": "2025-08-06T05:08:40.153282+00:00",
            "is_default": false,
            "product_id": "22222222-3333-4444-5555-666666666661",
            "sort_order": 3,
            "additional_price": 50
          }
        ]
      },
      {
        "id": "bd221c44-8705-498f-9b88-5cb2cfdecb6a",
        "combo_id": "3b5857b2-a782-48a0-97d6-95f85f158a4f",
        "category_id": null,
        "selection_name": "甜點選擇",
        "description": "請選擇一道甜點",
        "min_selections": 1,
        "max_selections": 1,
        "is_required": true,
        "display_order": 3,
        "created_at": "2025-08-06T05:08:39.956168+00:00",
        "updated_at": "2025-08-06T05:08:39.956168+00:00",
        "combo_selection_options": [
          {
            "id": "8f7b0585-64ec-4e0d-98fe-782a1fbe95ed",
            "rule_id": "bd221c44-8705-498f-9b88-5cb2cfdecb6a",
            "products": {
              "id": "c0000006-0006-0006-0006-000000000006",
              "name": "提拉米蘇",
              "price": 140
            },
            "created_at": "2025-08-06T05:08:40.153282+00:00",
            "is_default": true,
            "product_id": "c0000006-0006-0006-0006-000000000006",
            "sort_order": 1,
            "additional_price": 0
          },
          {
            "id": "0eafd441-a732-4ed6-9eae-a39370913bb4",
            "rule_id": "bd221c44-8705-498f-9b88-5cb2cfdecb6a",
            "products": {
              "id": "c0000005-0005-0005-0005-000000000005",
              "name": "草莓蛋糕",
              "price": 130
            },
            "created_at": "2025-08-06T05:08:40.153282+00:00",
            "is_default": false,
            "product_id": "c0000005-0005-0005-0005-000000000005",
            "sort_order": 2,
            "additional_price": -10
          }
        ]
      }
    ],
    "priceRange": {
      "min": 320,
      "max": 480
    }
  },
  {
    "combo": {
      "id": "a2cdbe0c-d58c-42d3-ba7a-8e9148d6502f",
      "restaurant_id": "11111111-1111-1111-1111-111111111111",
      "category_id": null,
      "name": "商務午餐套餐",
      "description": "快速便捷的商務午餐選擇，營養均衡",
      "price": 280,
      "cost": 0,
      "combo_type": "selectable",
      "image_url": null,
      "sort_order": 2,
      "is_available": true,
      "is_active": true,
      "preparation_time": 18,
      "availability_start": null,
      "availability_end": null,
      "available_days": null,
      "min_items": 1,
      "max_items": null,
      "discount_type": "fixed",
      "discount_value": 0,
      "ai_popularity_score": 0.5,
      "ai_recommended": false,
      "created_at": "2025-08-06T05:08:39.711867+00:00",
      "updated_at": "2025-08-06T05:08:39.711867+00:00",
      "metadata": null
    },
    "rules": [
      {
        "id": "38db4f21-6069-4c26-ac25-8659e5682ed7",
        "combo_id": "a2cdbe0c-d58c-42d3-ba7a-8e9148d6502f",
        "category_id": null,
        "selection_name": "主餐選擇",
        "description": "請選擇一道主餐",
        "min_selections": 1,
        "max_selections": 1,
        "is_required": true,
        "display_order": 1,
        "created_at": "2025-08-06T05:08:39.956168+00:00",
        "updated_at": "2025-08-06T05:08:39.956168+00:00",
        "combo_selection_options": [
          {
            "id": "7c2c96aa-1896-47be-a9ec-c6c951088001",
            "rule_id": "38db4f21-6069-4c26-ac25-8659e5682ed7",
            "products": {
              "id": "95942080-0f97-47ed-807c-9a403d3cfaa2",
              "name": "打拋豬飯",
              "price": 220
            },
            "created_at": "2025-08-06T05:08:40.153282+00:00",
            "is_default": true,
            "product_id": "95942080-0f97-47ed-807c-9a403d3cfaa2",
            "sort_order": 1,
            "additional_price": 0
          },
          {
            "id": "f0a451bb-0a4f-4682-a30f-06a3b5013c0b",
            "rule_id": "38db4f21-6069-4c26-ac25-8659e5682ed7",
            "products": {
              "id": "3b9ca17d-ca62-4327-8eb6-9c2605deba10",
              "name": "雞肉帕泰",
              "price": 190
            },
            "created_at": "2025-08-06T05:08:40.153282+00:00",
            "is_default": false,
            "product_id": "3b9ca17d-ca62-4327-8eb6-9c2605deba10",
            "sort_order": 2,
            "additional_price": -20
          },
          {
            "id": "e47f2f9c-5d1a-467e-b6fb-a46fe589a152",
            "rule_id": "38db4f21-6069-4c26-ac25-8659e5682ed7",
            "products": {
              "id": "2c5fc386-c13c-4f04-8ef7-010c8173c30e",
              "name": "打拋雞飯",
              "price": 220
            },
            "created_at": "2025-08-06T05:08:40.153282+00:00",
            "is_default": false,
            "product_id": "2c5fc386-c13c-4f04-8ef7-010c8173c30e",
            "sort_order": 3,
            "additional_price": 0
          },
          {
            "id": "97ad1f1a-405b-4e42-9429-d936637a2462",
            "rule_id": "38db4f21-6069-4c26-ac25-8659e5682ed7",
            "products": {
              "id": "1414e7fc-82a6-4175-80ca-f89891bba68a",
              "name": "魚露炸腿飯",
              "price": 250
            },
            "created_at": "2025-08-06T05:08:40.153282+00:00",
            "is_default": false,
            "product_id": "1414e7fc-82a6-4175-80ca-f89891bba68a",
            "sort_order": 4,
            "additional_price": 30
          },
          {
            "id": "de9fd8c6-e171-4222-9b7f-2943151e2e6b",
            "rule_id": "38db4f21-6069-4c26-ac25-8659e5682ed7",
            "products": {
              "id": "22222222-3333-4444-5555-666666666662",
              "name": "炭烤雞胸",
              "price": 480
            },
            "created_at": "2025-08-06T05:08:40.153282+00:00",
            "is_default": false,
            "product_id": "22222222-3333-4444-5555-666666666662",
            "sort_order": 5,
            "additional_price": 80
          }
        ]
      },
      {
        "id": "22e8d4d2-134d-49ef-b317-fc592985411b",
        "combo_id": "a2cdbe0c-d58c-42d3-ba7a-8e9148d6502f",
        "category_id": null,
        "selection_name": "額外配菜",
        "description": "可選擇額外配菜（可選）",
        "min_selections": 0,
        "max_selections": 2,
        "is_required": false,
        "display_order": 2,
        "created_at": "2025-08-06T05:08:39.956168+00:00",
        "updated_at": "2025-08-06T05:08:39.956168+00:00",
        "combo_selection_options": [
          {
            "id": "986c648f-d071-4e24-b1c7-08b47b3c497f",
            "rule_id": "22e8d4d2-134d-49ef-b317-fc592985411b",
            "products": {
              "id": "75d95537-b6d0-45eb-9e18-e15464b83d7e",
              "name": "涼拌青木瓜",
              "price": 120
            },
            "created_at": "2025-08-06T05:08:40.153282+00:00",
            "is_default": false,
            "product_id": "75d95537-b6d0-45eb-9e18-e15464b83d7e",
            "sort_order": 1,
            "additional_price": 60
          },
          {
            "id": "38aa4060-1897-4e37-8b8f-51fc72bb86b7",
            "rule_id": "22e8d4d2-134d-49ef-b317-fc592985411b",
            "products": {
              "id": "2ce2edcd-b8ce-4c29-8d22-4acb390ec1f3",
              "name": "Laab 肉末萵苣包",
              "price": 120
            },
            "created_at": "2025-08-06T05:08:40.153282+00:00",
            "is_default": false,
            "product_id": "2ce2edcd-b8ce-4c29-8d22-4acb390ec1f3",
            "sort_order": 2,
            "additional_price": 60
          }
        ]
      }
    ],
    "priceRange": {
      "min": 260,
      "max": 360
    }
  },
  {
    "combo": {
      "id": "6fabe20e-2ef3-4273-9f8e-07030b43b3c9",
      "restaurant_id": "11111111-1111-1111-1111-111111111111",
      "category_id": null,
      "name": "家庭分享套餐",
      "description": "適合2-3人分享的豪華套餐組合",
      "price": 650,
      "cost": 0,
      "combo_type": "selectable",
      "image_url": null,
      "sort_order": 3,
      "is_available": true,
      "is_active": true,
      "preparation_time": 35,
      "availability_start": null,
      "availability_end": null,
      "available_days": null,
      "min_items": 1,
      "max_items": null,
      "discount_type": "fixed",
      "discount_value": 0,
      "ai_popularity_score": 0.5,
      "ai_recommended": false,
      "created_at": "2025-08-06T05:08:39.711867+00:00",
      "updated_at": "2025-08-06T05:08:39.711867+00:00",
      "metadata": null
    },
    "rules": [
      {
        "id": "3a791595-63c3-481e-85df-f1fc8484704c",
        "combo_id": "6fabe20e-2ef3-4273-9f8e-07030b43b3c9",
        "category_id": null,
        "selection_name": "主餐選擇",
        "description": "請選擇2-3道主餐",
        "min_selections": 2,
        "max_selections": 3,
        "is_required": true,
        "display_order": 1,
        "created_at": "2025-08-06T05:08:39.956168+00:00",
        "updated_at": "2025-08-06T05:08:39.956168+00:00",
        "combo_selection_options": [
          {
            "id": "b0a9342a-4770-4a21-bebb-0c473e8395a6",
            "rule_id": "3a791595-63c3-481e-85df-f1fc8484704c",
            "products": {
              "id": "95942080-0f97-47ed-807c-9a403d3cfaa2",
              "name": "打拋豬飯",
              "price": 220
            },
            "created_at": "2025-08-06T05:08:40.153282+00:00",
            "is_default": true,
            "product_id": "95942080-0f97-47ed-807c-9a403d3cfaa2",
            "sort_order": 1,
            "additional_price": 0
          },
          {
            "id": "810a85d9-c174-4d3b-b839-88da89688104",
            "rule_id": "3a791595-63c3-481e-85df-f1fc8484704c",
            "products": {
              "id": "3b9ca17d-ca62-4327-8eb6-9c2605deba10",
              "name": "雞肉帕泰",
              "price": 190
            },
            "created_at": "2025-08-06T05:08:40.153282+00:00",
            "is_default": false,
            "product_id": "3b9ca17d-ca62-4327-8eb6-9c2605deba10",
            "sort_order": 2,
            "additional_price": -20
          },
          {
            "id": "2c3b3f44-132f-46bc-9f1e-a9c7d9dcda7f",
            "rule_id": "3a791595-63c3-481e-85df-f1fc8484704c",
            "products": {
              "id": "2c5fc386-c13c-4f04-8ef7-010c8173c30e",
              "name": "打拋雞飯",
              "price": 220
            },
            "created_at": "2025-08-06T05:08:40.153282+00:00",
            "is_default": false,
            "product_id": "2c5fc386-c13c-4f04-8ef7-010c8173c30e",
            "sort_order": 3,
            "additional_price": 0
          },
          {
            "id": "dfddfac6-4db4-451e-97fd-af52b2458c12",
            "rule_id": "3a791595-63c3-481e-85df-f1fc8484704c",
            "products": {
              "id": "1414e7fc-82a6-4175-80ca-f89891bba68a",
              "name": "魚露炸腿飯",
              "price": 250
            },
            "created_at": "2025-08-06T05:08:40.153282+00:00",
            "is_default": false,
            "product_id": "1414e7fc-82a6-4175-80ca-f89891bba68a",
            "sort_order": 4,
            "additional_price": 30
          },
          {
            "id": "bef6d0a0-5705-4be7-a684-59ad590d08c4",
            "rule_id": "3a791595-63c3-481e-85df-f1fc8484704c",
            "products": {
              "id": "22222222-3333-4444-5555-666666666662",
              "name": "炭烤雞胸",
              "price": 480
            },
            "created_at": "2025-08-06T05:08:40.153282+00:00",
            "is_default": false,
            "product_id": "22222222-3333-4444-5555-666666666662",
            "sort_order": 5,
            "additional_price": 80
          }
        ]
      },
      {
        "id": "91e174bc-a814-44d3-ba4e-c793183478cd",
        "combo_id": "6fabe20e-2ef3-4273-9f8e-07030b43b3c9",
        "category_id": null,
        "selection_name": "配菜選擇",
        "description": "請選擇配菜",
        "min_selections": 1,
        "max_selections": 3,
        "is_required": true,
        "display_order": 2,
        "created_at": "2025-08-06T05:08:39.956168+00:00",
        "updated_at": "2025-08-06T05:08:39.956168+00:00",
        "combo_selection_options": [
          {
            "id": "156c98e1-49ab-45d2-b1cb-d435c9f4b7bc",
            "rule_id": "91e174bc-a814-44d3-ba4e-c793183478cd",
            "products": {
              "id": "75d95537-b6d0-45eb-9e18-e15464b83d7e",
              "name": "涼拌青木瓜",
              "price": 120
            },
            "created_at": "2025-08-06T05:08:40.153282+00:00",
            "is_default": true,
            "product_id": "75d95537-b6d0-45eb-9e18-e15464b83d7e",
            "sort_order": 1,
            "additional_price": 0
          },
          {
            "id": "fa0ec168-bf5c-4cee-92db-7247547de043",
            "rule_id": "91e174bc-a814-44d3-ba4e-c793183478cd",
            "products": {
              "id": "2ce2edcd-b8ce-4c29-8d22-4acb390ec1f3",
              "name": "Laab 肉末萵苣包",
              "price": 120
            },
            "created_at": "2025-08-06T05:08:40.153282+00:00",
            "is_default": false,
            "product_id": "2ce2edcd-b8ce-4c29-8d22-4acb390ec1f3",
            "sort_order": 2,
            "additional_price": 0
          },
          {
            "id": "a8fc8f7e-0684-4dcf-b7fd-d75a9c6b400c",
            "rule_id": "91e174bc-a814-44d3-ba4e-c793183478cd",
            "products": {
              "id": "22222222-3333-4444-5555-666666666661",
              "name": "凱薩沙拉",
              "price": 280
            },
            "created_at": "2025-08-06T05:08:40.153282+00:00",
            "is_default": false,
            "product_id": "22222222-3333-4444-5555-666666666661",
            "sort_order": 3,
            "additional_price": 50
          }
        ]
      },
      {
        "id": "cdc12817-006c-492a-8b24-1f53f6d91690",
        "combo_id": "6fabe20e-2ef3-4273-9f8e-07030b43b3c9",
        "category_id": null,
        "selection_name": "甜點選擇",
        "description": "請選擇甜點",
        "min_selections": 1,
        "max_selections": 2,
        "is_required": false,
        "display_order": 3,
        "created_at": "2025-08-06T05:08:39.956168+00:00",
        "updated_at": "2025-08-06T05:08:39.956168+00:00",
        "combo_selection_options": [
          {
            "id": "40e519c8-96ad-4e40-90e7-96d2bd2c844b",
            "rule_id": "cdc12817-006c-492a-8b24-1f53f6d91690",
            "products": {
              "id": "c0000006-0006-0006-0006-000000000006",
              "name": "提拉米蘇",
              "price": 140
            },
            "created_at": "2025-08-06T05:08:40.153282+00:00",
            "is_default": true,
            "product_id": "c0000006-0006-0006-0006-000000000006",
            "sort_order": 1,
            "additional_price": 0
          },
          {
            "id": "f48e7fc3-485a-4df2-b54d-7d5c21ec58bc",
            "rule_id": "cdc12817-006c-492a-8b24-1f53f6d91690",
            "products": {
              "id": "c0000005-0005-0005-0005-000000000005",
              "name": "草莓蛋糕",
              "price": 130
            },
            "created_at": "2025-08-06T05:08:40.153282+00:00",
            "is_default": false,
            "product_id": "c0000005-0005-0005-0005-000000000005",
            "sort_order": 2,
            "additional_price": -10
          }
        ]
      }
    ],
    "priceRange": {
      "min": 610,
      "max": 1040
    }
  }
];
        
        function showComboDetails(comboId) {
            const item = comboData.find(item => item.combo.id === comboId);
            if (!item) return;
            
            document.getElementById('modalTitle').textContent = item.combo.name + ' - 詳細規則';
            
            const content = `
                <div class="space-y-6">
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h3 class="font-semibold mb-2">套餐資訊</h3>
                        <div class="grid grid-cols-2 gap-4 text-sm">
                            <div>基礎價格: NT$ ${item.combo.price}</div>
                            <div>製作時間: ${item.combo.preparation_time} 分鐘</div>
                            <div>價格範圍: NT$ ${item.priceRange.min} - ${item.priceRange.max}</div>
                            <div>套餐類型: ${item.combo.combo_type}</div>
                        </div>
                        <p class="mt-2 text-gray-600">${item.combo.description}</p>
                    </div>
                    
                    ${item.rules.map(rule => `
                        <div class="border border-gray-200 rounded-lg p-4">
                            <div class="flex justify-between items-start mb-3">
                                <div>
                                    <h4 class="font-semibold">${rule.selection_name}</h4>
                                    <p class="text-sm text-gray-600">${rule.description}</p>
                                </div>
                                <div class="text-right text-sm">
                                    <div class="text-gray-600">選擇 ${rule.min_selections} - ${rule.max_selections} 個</div>
                                    <div class="${rule.is_required ? 'text-red-500' : 'text-gray-400'}">${rule.is_required ? '必選' : '可選'}</div>
                                </div>
                            </div>
                            
                            <div class="space-y-2">
                                <h5 class="text-sm font-medium text-gray-700">商品選項 (${rule.combo_selection_options.length} 個):</h5>
                                ${rule.combo_selection_options.map(option => `
                                    <div class="flex justify-between items-center py-1 px-2 bg-gray-50 rounded text-sm">
                                        <span>${option.products.name} ${option.is_default ? '<span class="text-green-600">[預設]</span>' : ''}</span>
                                        <span class="${option.additional_price > 0 ? 'text-red-600' : option.additional_price < 0 ? 'text-green-600' : 'text-gray-600'}">
                                            ${option.additional_price > 0 ? '+' : ''}${option.additional_price !== 0 ? 'NT$ ' + option.additional_price : '無額外費用'}
                                        </span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
            
            document.getElementById('modalContent').innerHTML = content;
            document.getElementById('detailModal').classList.remove('hidden');
        }
        
        function closeModal() {
            document.getElementById('detailModal').classList.add('hidden');
        }
        
        console.log('載入了', comboData.length, '個套餐的測試數據');
    </script>
</body>
</html>
    