<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>套餐規則編輯器測試</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // 簡化版的測試界面
        function TestComboRuleEditor() {
            const [currentView, setCurrentView] = React.useState('intro')

            const testCombo = {
                id: 'test-combo-1',
                name: '經典商務套餐',
                description: '包含主餐、飲品和甜點的完整套餐組合',
                price: 200,
                combo_type: 'selectable',
                is_available: true,
                preparation_time: 25
            }

            if (currentView === 'editor') {
                return (
                    <div className="min-h-screen bg-gray-50 p-8">
                        <div className="max-w-7xl mx-auto">
                            <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                                <div className="flex justify-between items-center mb-6">
                                    <h1 className="text-2xl font-bold text-gray-900">套餐規則編輯器 (演示版)</h1>
                                    <button 
                                        onClick={() => setCurrentView('intro')}
                                        className="px-4 py-2 text-gray-600 hover:text-gray-800"
                                    >
                                        ← 返回
                                    </button>
                                </div>
                                
                                <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                    <div>
                                        <h3 className="text-lg font-semibold mb-4">規則編輯區 (演示)</h3>
                                        <div className="space-y-4">
                                            <div className="p-4 border border-gray-200 rounded-lg">
                                                <h4 className="font-medium text-gray-900 mb-2">主餐選擇 (必選)</h4>
                                                <p className="text-sm text-gray-600">選擇 1 - 1 個</p>
                                                <div className="mt-2 space-y-1">
                                                    <div className="text-xs text-gray-500">• 牛肉拉麵 (+$0)</div>
                                                    <div className="text-xs text-gray-500">• 豚骨拉麵 (+$20)</div>
                                                    <div className="text-xs text-gray-500">• 海鮮拉麵 (+$50)</div>
                                                </div>
                                            </div>
                                            
                                            <div className="p-4 border border-gray-200 rounded-lg">
                                                <h4 className="font-medium text-gray-900 mb-2">飲品選擇 (必選)</h4>
                                                <p className="text-sm text-gray-600">選擇 1 - 1 個</p>
                                                <div className="mt-2 space-y-1">
                                                    <div className="text-xs text-gray-500">• 紅茶 (+$0)</div>
                                                    <div className="text-xs text-gray-500">• 咖啡 (+$30)</div>
                                                    <div className="text-xs text-gray-500">• 果汁 (+$40)</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <h3 className="text-lg font-semibold mb-4">套餐預覽</h3>
                                        <div className="p-4 border border-gray-200 rounded-lg">
                                            <h4 className="font-bold text-xl text-gray-900 mb-2">{testCombo.name}</h4>
                                            <p className="text-gray-600 mb-4">{testCombo.description}</p>
                                            
                                            <div className="space-y-3">
                                                <div className="flex justify-between">
                                                    <span>基礎價格</span>
                                                    <span className="font-semibold">${testCombo.price}</span>
                                                </div>
                                                <div className="flex justify-between text-sm text-gray-600">
                                                    <span>主餐選擇</span>
                                                    <span>+$0 ~ +$50</span>
                                                </div>
                                                <div className="flex justify-between text-sm text-gray-600">
                                                    <span>飲品選擇</span>
                                                    <span>+$0 ~ +$40</span>
                                                </div>
                                                <div className="border-t pt-3">
                                                    <div className="flex justify-between font-bold text-lg">
                                                        <span>價格範圍</span>
                                                        <span className="text-orange-600">${testCombo.price} - ${testCombo.price + 90}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="mt-4 p-4 bg-green-50 border border-green-200 rounded-lg">
                                            <div className="flex items-center gap-2">
                                                <div className="w-5 h-5 bg-green-500 rounded-full flex items-center justify-center">
                                                    <span className="text-white text-xs">✓</span>
                                                </div>
                                                <span className="text-green-800 font-medium">配置完整</span>
                                            </div>
                                            <p className="text-green-700 text-sm mt-1">套餐規則設定完整，可以發布使用</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div className="flex justify-end gap-4 mt-8 pt-6 border-t">
                                    <button 
                                        onClick={() => alert('演示版：規則已保存！')}
                                        className="px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700"
                                    >
                                        保存規則
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                )
            }

            return (
                <div className="min-h-screen bg-gray-50 p-8">
                    <div className="max-w-4xl mx-auto">
                        <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-8">
                            <h1 className="text-3xl font-bold text-gray-900 mb-6">🎯 套餐規則編輯器開發完成</h1>
                            
                            <div className="mb-8">
                                <h2 className="text-xl font-semibold text-gray-800 mb-4">📊 Phase 1 完成功能</h2>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div className="p-4 bg-green-50 border border-green-200 rounded-lg">
                                        <h3 className="font-semibold text-green-800 mb-2">✅ ComboRuleEditor</h3>
                                        <ul className="text-sm text-green-700 space-y-1">
                                            <li>• 主編輯器組件</li>
                                            <li>• 編輯/預覽模式切換</li>
                                            <li>• 規則驗證系統</li>
                                            <li>• 錯誤提示機制</li>
                                        </ul>
                                    </div>
                                    
                                    <div className="p-4 bg-green-50 border border-green-200 rounded-lg">
                                        <h3 className="font-semibold text-green-800 mb-2">✅ RuleSection</h3>
                                        <ul className="text-sm text-green-700 space-y-1">
                                            <li>• 規則編輯界面</li>
                                            <li>• 商品選項管理</li>
                                            <li>• 加價設定功能</li>
                                            <li>• 排序與刪除</li>
                                        </ul>
                                    </div>
                                    
                                    <div className="p-4 bg-green-50 border border-green-200 rounded-lg">
                                        <h3 className="font-semibold text-green-800 mb-2">✅ ComboPreview</h3>
                                        <ul className="text-sm text-green-700 space-y-1">
                                            <li>• 即時預覽功能</li>
                                            <li>• 價格計算顯示</li>
                                            <li>• 配置狀態檢查</li>
                                            <li>• 價格明細分解</li>
                                        </ul>
                                    </div>
                                    
                                    <div className="p-4 bg-green-50 border border-green-200 rounded-lg">
                                        <h3 className="font-semibold text-green-800 mb-2">✅ 系統整合</h3>
                                        <ul className="text-sm text-green-700 space-y-1">
                                            <li>• MenuService API 擴展</li>
                                            <li>• 類型定義完善</li>
                                            <li>• ComboCard 更新</li>
                                            <li>• 管理介面整合</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div className="mb-8">
                                <h2 className="text-xl font-semibold text-gray-800 mb-4">測試套餐資訊</h2>
                                <div className="bg-gray-50 p-4 rounded-lg">
                                    <div className="grid grid-cols-2 gap-4">
                                        <div>
                                            <p className="text-sm text-gray-600">套餐名稱</p>
                                            <p className="font-semibold">{testCombo.name}</p>
                                        </div>
                                        <div>
                                            <p className="text-sm text-gray-600">套餐類型</p>
                                            <p className="font-semibold">自選套餐</p>
                                        </div>
                                        <div>
                                            <p className="text-sm text-gray-600">基礎價格</p>
                                            <p className="font-semibold">${testCombo.price}</p>
                                        </div>
                                        <div>
                                            <p className="text-sm text-gray-600">製作時間</p>
                                            <p className="font-semibold">{testCombo.preparation_time} 分鐘</p>
                                        </div>
                                    </div>
                                    <div className="mt-4">
                                        <p className="text-sm text-gray-600">描述</p>
                                        <p className="text-gray-800">{testCombo.description}</p>
                                    </div>
                                </div>
                            </div>

                            <div className="text-center mb-8">
                                <button
                                    onClick={() => setCurrentView('editor')}
                                    className="inline-flex items-center gap-2 px-6 py-3 bg-orange-600 text-white font-semibold rounded-lg hover:bg-orange-700 transition-colors"
                                >
                                    🚀 體驗規則編輯器
                                </button>
                            </div>

                            <div className="p-4 bg-blue-50 border border-blue-200 rounded-lg">
                                <h3 className="font-semibold text-blue-800 mb-2">🎯 開發成果</h3>
                                <ul className="text-sm text-blue-700 space-y-1">
                                    <li>• <strong>Phase 1 完成</strong>：套餐規則編輯器基礎功能全部實現</li>
                                    <li>• <strong>組件架構</strong>：模組化設計，易於維護和擴展</li>
                                    <li>• <strong>用戶體驗</strong>：直觀的編輯界面，即時預覽功能</li>
                                    <li>• <strong>技術實現</strong>：TypeScript 類型安全，完整驗證機制</li>
                                    <li>• <strong>整合度</strong>：與現有套餐管理系統無縫整合</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            )
        }

        ReactDOM.render(<TestComboRuleEditor />, document.getElementById('root'))
    </script>
</body>
</html>
