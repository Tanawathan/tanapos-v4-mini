# ğŸ“‹ èœå–®ç®¡ç†é é¢è¨­è¨ˆå ±å‘Š

## ğŸ¯ æ¦‚è¿°

æœ¬è¨­è¨ˆå ±å‘Šè©³ç´°èªªæ˜èœå–®ç®¡ç†é é¢çš„è¨­è¨ˆæ¶æ§‹ã€åŠŸèƒ½è¦åŠƒèˆ‡æŠ€è¡“å¯¦ç¾ï¼ŒåŸºæ–¼ Supabase æ•¸æ“šåº«çš„çœŸå¯¦æ•¸æ“šï¼Œæä¾›å®Œæ•´çš„èœå–®ç®¡ç†ã€å¥—é¤å»ºç«‹èˆ‡ä¿®æ”¹åŠŸèƒ½ã€‚

---

## ğŸ“Š æ•¸æ“šåº«çµæ§‹åˆ†æ

### æ ¸å¿ƒè¡¨å–®çµæ§‹

#### 1. **categories** (åˆ†é¡è¡¨)
```sql
- id: uuid (ä¸»éµ)
- restaurant_id: uuid (é¤å»³ID)
- name: åˆ†é¡åç¨±
- description: åˆ†é¡æè¿°
- sort_order: æ’åºé †åº
- color: åˆ†é¡é¡è‰² (é è¨­: #3B82F6)
- icon: åˆ†é¡åœ–ç¤º (é è¨­: ğŸ½ï¸)
- is_active: æ˜¯å¦å•Ÿç”¨
```

#### 2. **products** (å•†å“è¡¨)
```sql
- id: uuid (ä¸»éµ)
- restaurant_id: uuid (é¤å»³ID)
- category_id: uuid (åˆ†é¡ID)
- name: å•†å“åç¨±
- description: å•†å“æè¿°
- sku: å•†å“ç·¨è™Ÿ
- price: å”®åƒ¹
- cost: æˆæœ¬
- image_url: å•†å“åœ–ç‰‡
- sort_order: æ’åºé †åº
- is_available: æ˜¯å¦å¯å”®
- is_active: æ˜¯å¦å•Ÿç”¨
- preparation_time: æº–å‚™æ™‚é–“
- ai_popularity_score: AI äººæ°£åˆ†æ•¸
- ai_recommended: AI æ¨è–¦
```

#### 3. **combo_products** (å¥—é¤è¡¨)
```sql
- id: uuid (ä¸»éµ)
- name: å¥—é¤åç¨±
- description: å¥—é¤æè¿°
- price: å¥—é¤åƒ¹æ ¼
- combo_type: å¥—é¤é¡å‹ ('fixed', 'selectable')
- is_available: æ˜¯å¦å¯å”®
- preparation_time: æº–å‚™æ™‚é–“
- category_id: æ‰€å±¬åˆ†é¡
```

#### 4. **combo_selection_rules** (å¥—é¤é¸æ“‡è¦å‰‡)
```sql
- id: uuid (ä¸»éµ)
- combo_id: å¥—é¤ID
- category_id: å¯é¸åˆ†é¡ID
- selection_name: é¸æ“‡é …ç›®åç¨±
- min_selections: æœ€å°‘é¸æ“‡æ•¸é‡
- max_selections: æœ€å¤šé¸æ“‡æ•¸é‡
- is_required: æ˜¯å¦å¿…é¸
- display_order: é¡¯ç¤ºé †åº
```

#### 5. **combo_selection_options** (å¥—é¤é¸æ“‡é¸é …)
```sql
- id: uuid (ä¸»éµ)
- rule_id: è¦å‰‡ID
- product_id: å•†å“ID
- additional_price: é¡å¤–è²»ç”¨
- is_default: æ˜¯å¦é è¨­é¸é …
```

---

## ğŸ¨ é é¢è¨­è¨ˆæ¶æ§‹

### ä¸»è¦ç‰ˆé¢é…ç½®

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [è¿”å›é¦–é ]                               ğŸ“‹ èœå–®ç®¡ç†    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ“ å•†å“ç®¡ç†] [ğŸ å¥—é¤ç®¡ç†] [ğŸ“‚ åˆ†é¡ç®¡ç†] [ğŸ“Š å ±è¡¨åˆ†æ]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚                   ä¸»è¦å…§å®¹å€åŸŸ                           â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Tab å°èˆªçµæ§‹

1. **ğŸ“ å•†å“ç®¡ç†** - å–®å“èœå–®çš„ CRUD æ“ä½œ
2. **ğŸ å¥—é¤ç®¡ç†** - å¥—é¤çš„å»ºç«‹ã€ç·¨è¼¯èˆ‡è¦å‰‡è¨­å®š
3. **ğŸ“‚ åˆ†é¡ç®¡ç†** - åˆ†é¡çš„ç®¡ç†èˆ‡æ’åº
4. **ğŸ“Š å ±è¡¨åˆ†æ** - éŠ·å”®æ•¸æ“šèˆ‡ AI åˆ†æï¼ˆå¾ŒçºŒé–‹ç™¼ï¼‰

---

## ğŸ› ï¸ åŠŸèƒ½æ¨¡çµ„è¨­è¨ˆ

### 1. å•†å“ç®¡ç†æ¨¡çµ„

#### 1.1 å•†å“åˆ—è¡¨è¦–åœ–
```typescript
interface ProductListView {
  // ç¯©é¸åŠŸèƒ½
  filters: {
    category: string | null
    availability: 'all' | 'available' | 'unavailable'
    aiRecommended: boolean | null
    searchTerm: string
  }
  
  // æ’åºåŠŸèƒ½
  sorting: {
    field: 'name' | 'price' | 'popularity' | 'created_at'
    order: 'asc' | 'desc'
  }
  
  // é¡¯ç¤ºæ¨¡å¼
  viewMode: 'grid' | 'list' | 'table'
}
```

#### 1.2 å•†å“å¡ç‰‡çµ„ä»¶
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ğŸ“· å•†å“åœ–ç‰‡]                â”‚
â”‚                            â”‚
â”‚ ğŸœ å•†å“åç¨±                 â”‚
â”‚ ğŸ’° NT$ 120                 â”‚
â”‚ â­ äººæ°£: 85%               â”‚
â”‚                            â”‚
â”‚ [âœï¸ç·¨è¼¯] [ğŸ“‹è¤‡è£½] [ğŸ—‘ï¸åˆªé™¤] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 1.3 å•†å“ç·¨è¼¯è¡¨å–®
```typescript
interface ProductForm {
  basic: {
    name: string
    description: string
    sku: string
    category_id: string
  }
  
  pricing: {
    price: number
    cost: number
  }
  
  availability: {
    is_available: boolean
    is_active: boolean
    preparation_time: number
  }
  
  media: {
    image_url: string
    image_file?: File
  }
  
  advanced: {
    sort_order: number
    ai_recommended: boolean
  }
}
```

### 2. å¥—é¤ç®¡ç†æ¨¡çµ„

#### 2.1 å¥—é¤é¡å‹é¸æ“‡
- **å›ºå®šå¥—é¤ (Fixed Combo)**: é è¨­çµ„åˆï¼Œä¸å¯æ›´æ”¹
- **å¯é¸å¥—é¤ (Selectable Combo)**: å®¢æˆ¶å¯è‡ªç”±é¸æ“‡çµ„åˆ

#### 2.2 å¥—é¤å»ºç«‹æµç¨‹
```
æ­¥é©Ÿ 1: åŸºæœ¬è³‡è¨Š
â”œâ”€â”€ å¥—é¤åç¨±
â”œâ”€â”€ å¥—é¤æè¿°
â”œâ”€â”€ å¥—é¤åƒ¹æ ¼
â”œâ”€â”€ å¥—é¤é¡å‹
â””â”€â”€ æ‰€å±¬åˆ†é¡

æ­¥é©Ÿ 2: é¸æ“‡è¦å‰‡è¨­å®š (åƒ…å¯é¸å¥—é¤)
â”œâ”€â”€ å‰èœé¸æ“‡ (å¿…é¸ 1 é …)
â”œâ”€â”€ ä¸»é¤é¸æ“‡ (å¿…é¸ 1 é …)
â”œâ”€â”€ é£²å“é¸æ“‡ (å¿…é¸ 1 é …)
â””â”€â”€ ç”œé»é¸æ“‡ (å¿…é¸ 1 é …)

æ­¥é©Ÿ 3: å•†å“é¸é …è¨­å®š
â”œâ”€â”€ ç‚ºæ¯å€‹è¦å‰‡æ·»åŠ å¯é¸å•†å“
â”œâ”€â”€ è¨­å®šé¡å¤–è²»ç”¨
â”œâ”€â”€ è¨­å®šé è¨­é¸é …
â””â”€â”€ æ’åºèˆ‡å„ªåŒ–

æ­¥é©Ÿ 4: é è¦½èˆ‡ç™¼å¸ƒ
â”œâ”€â”€ å¥—é¤é è¦½
â”œâ”€â”€ åƒ¹æ ¼è¨ˆç®—é©—è­‰
â”œâ”€â”€ è¦å‰‡é‚è¼¯æª¢æŸ¥
â””â”€â”€ æ­£å¼ç™¼å¸ƒ
```

#### 2.3 å¥—é¤è¦å‰‡ç·¨è¼¯å™¨
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¯ é¸æ“‡è¦å‰‡: ä¸»é¤é¸æ“‡                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åˆ†é¡: [ğŸœ ä¸»é£Ÿé¡ â–¼]                        â”‚
â”‚ é¸æ“‡é …ç›®åç¨±: [ä¸»é¤é¸æ“‡____________]         â”‚
â”‚ æœ€å°‘é¸æ“‡: [1] æœ€å¤šé¸æ“‡: [1]                 â”‚
â”‚ â–¡ å¿…é¸é …ç›® â˜‘ é¡¯ç¤ºåœ¨å‰é¢                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸœ å¯é¸å•†å“:                               â”‚
â”‚ â˜‘ ç‰›è‚‰æ‹‰éºµ (+$0)                          â”‚
â”‚ â˜‘ è±šéª¨æ‹‰éºµ (+$20)                         â”‚
â”‚ â˜‘ æµ·é®®æ‹‰éºµ (+$50)                         â”‚
â”‚ â–¡ ç´ é£Ÿæ‹‰éºµ (+$0)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ’¾ å„²å­˜è¦å‰‡] [âŒ å–æ¶ˆ] [ğŸ—‘ï¸ åˆªé™¤è¦å‰‡]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. åˆ†é¡ç®¡ç†æ¨¡çµ„

#### 3.1 åˆ†é¡åˆ—è¡¨
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ½ï¸ åˆ†é¡ç®¡ç†                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [+ æ–°å¢åˆ†é¡]                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸœ #3B82F6 ä¸»é£Ÿé¡      [18 é …å•†å“] [â†•ï¸ç·¨è¼¯] â”‚
â”‚ ğŸ¥¤ #F59E0B é£²æ–™é¡      [12 é …å•†å“] [â†•ï¸ç·¨è¼¯] â”‚
â”‚ ğŸ° #10B981 ç”œé»é¡      [8 é …å•†å“]  [â†•ï¸ç·¨è¼¯] â”‚
â”‚ ğŸ¥— #EF4444 æ²™æ‹‰é¡      [6 é …å•†å“]  [â†•ï¸ç·¨è¼¯] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2 åˆ†é¡ç·¨è¼¯è¡¨å–®
```typescript
interface CategoryForm {
  name: string           // åˆ†é¡åç¨±
  description: string    // åˆ†é¡æè¿°
  icon: string          // åœ–ç¤º emoji
  color: string         // ä¸»é¡Œé¡è‰²
  sort_order: number    // æ’åºé †åº
  is_active: boolean    // æ˜¯å¦å•Ÿç”¨
}
```

---

## ğŸ”§ æŠ€è¡“å¯¦ç¾è¦åŠƒ

### 1. Supabase API æ•´åˆ

#### 1.1 è³‡æ–™å­˜å–å±¤ (Data Access Layer)
```typescript
// services/menuService.ts
export class MenuService {
  // å•†å“ç›¸é—œ
  async getProducts(filters?: ProductFilters): Promise<Product[]>
  async getProductById(id: string): Promise<Product>
  async createProduct(product: CreateProductDto): Promise<Product>
  async updateProduct(id: string, product: UpdateProductDto): Promise<Product>
  async deleteProduct(id: string): Promise<void>
  
  // åˆ†é¡ç›¸é—œ
  async getCategories(): Promise<Category[]>
  async createCategory(category: CreateCategoryDto): Promise<Category>
  async updateCategory(id: string, category: UpdateCategoryDto): Promise<Category>
  async deleteCategory(id: string): Promise<void>
  
  // å¥—é¤ç›¸é—œ
  async getCombos(): Promise<Combo[]>
  async getComboById(id: string): Promise<ComboWithRules>
  async createCombo(combo: CreateComboDto): Promise<Combo>
  async updateCombo(id: string, combo: UpdateComboDto): Promise<Combo>
  async deleteCombo(id: string): Promise<void>
  
  // å¥—é¤è¦å‰‡ç›¸é—œ
  async getComboRules(comboId: string): Promise<ComboRule[]>
  async createComboRule(rule: CreateComboRuleDto): Promise<ComboRule>
  async updateComboRule(id: string, rule: UpdateComboRuleDto): Promise<ComboRule>
  async deleteComboRule(id: string): Promise<void>
}
```

#### 1.2 å³æ™‚åŒæ­¥åŠŸèƒ½
```typescript
// hooks/useRealtimeMenu.ts
export function useRealtimeMenu() {
  const [products, setProducts] = useState<Product[]>([])
  const [categories, setCategories] = useState<Category[]>([])
  
  useEffect(() => {
    // è¨‚é–±å•†å“è®Šæ›´
    const productSubscription = supabase
      .channel('products')
      .on('postgres_changes', {
        event: '*',
        schema: 'public',
        table: 'products'
      }, handleProductChange)
      .subscribe()
    
    // è¨‚é–±åˆ†é¡è®Šæ›´
    const categorySubscription = supabase
      .channel('categories')
      .on('postgres_changes', {
        event: '*',
        schema: 'public',
        table: 'categories'
      }, handleCategoryChange)
      .subscribe()
    
    return () => {
      productSubscription.unsubscribe()
      categorySubscription.unsubscribe()
    }
  }, [])
  
  return { products, categories, isLoading, error }
}
```

### 2. ç‹€æ…‹ç®¡ç†

#### 2.1 Menu Store (Zustand)
```typescript
// stores/menuStore.ts
interface MenuStore {
  // ç‹€æ…‹
  products: Product[]
  categories: Category[]
  combos: Combo[]
  loading: boolean
  error: string | null
  
  // ç¯©é¸èˆ‡æœå°‹
  filters: ProductFilters
  searchTerm: string
  selectedCategory: string | null
  
  // æ“ä½œæ–¹æ³•
  loadProducts: () => Promise<void>
  loadCategories: () => Promise<void>
  loadCombos: () => Promise<void>
  
  createProduct: (product: CreateProductDto) => Promise<void>
  updateProduct: (id: string, product: UpdateProductDto) => Promise<void>
  deleteProduct: (id: string) => Promise<void>
  
  setFilters: (filters: Partial<ProductFilters>) => void
  setSearchTerm: (term: string) => void
  setSelectedCategory: (categoryId: string | null) => void
}
```

### 3. çµ„ä»¶æ¶æ§‹

#### 3.1 é é¢çµ„ä»¶çµæ§‹
```
MenuManagementPage
â”œâ”€â”€ MenuTabs
â”‚   â”œâ”€â”€ ProductManagement
â”‚   â”‚   â”œâ”€â”€ ProductFilters
â”‚   â”‚   â”œâ”€â”€ ProductGrid
â”‚   â”‚   â”‚   â””â”€â”€ ProductCard
â”‚   â”‚   â””â”€â”€ ProductModal
â”‚   â”‚       â”œâ”€â”€ BasicInfoForm
â”‚   â”‚       â”œâ”€â”€ PricingForm
â”‚   â”‚       â”œâ”€â”€ AvailabilityForm
â”‚   â”‚       â””â”€â”€ MediaUploadForm
â”‚   â”‚
â”‚   â”œâ”€â”€ ComboManagement
â”‚   â”‚   â”œâ”€â”€ ComboList
â”‚   â”‚   â”‚   â””â”€â”€ ComboCard
â”‚   â”‚   â””â”€â”€ ComboEditor
â”‚   â”‚       â”œâ”€â”€ BasicInfoStep
â”‚   â”‚       â”œâ”€â”€ RulesStep
â”‚   â”‚       â”‚   â””â”€â”€ RuleEditor
â”‚   â”‚       â”œâ”€â”€ OptionsStep
â”‚   â”‚       â”‚   â””â”€â”€ OptionSelector
â”‚   â”‚       â””â”€â”€ PreviewStep
â”‚   â”‚
â”‚   â”œâ”€â”€ CategoryManagement
â”‚   â”‚   â”œâ”€â”€ CategoryList
â”‚   â”‚   â”‚   â””â”€â”€ CategoryItem
â”‚   â”‚   â””â”€â”€ CategoryModal
â”‚   â”‚
â”‚   â””â”€â”€ Analytics
â”‚       â”œâ”€â”€ SalesChart
â”‚       â”œâ”€â”€ PopularityRanking
â”‚       â””â”€â”€ AIRecommendations
```

---

## ğŸ¯ ç”¨æˆ¶é«”é©—è¨­è¨ˆ

### 1. éŸ¿æ‡‰å¼è¨­è¨ˆ

#### 1.1 æ–·é»è¦åŠƒ
- **Mobile**: < 768px - å–®æ¬„é¡¯ç¤ºï¼Œæ‘ºç–Šé¸å–®
- **Tablet**: 768px - 1024px - é›™æ¬„é¡¯ç¤ºï¼Œå´é‚Šé¸å–®
- **Desktop**: > 1024px - å¤šæ¬„é¡¯ç¤ºï¼Œå®Œæ•´åŠŸèƒ½

#### 1.2 äº’å‹•è¨­è¨ˆ
```typescript
// æ‹–æ‹½æ’åº
interface DragDropItem {
  id: string
  type: 'product' | 'category' | 'combo'
  sortOrder: number
}

// æ‰¹é‡æ“ä½œ
interface BatchOperation {
  selectedItems: string[]
  operation: 'delete' | 'activate' | 'deactivate' | 'category_change'
  confirm: boolean
}
```

### 2. ç„¡éšœç¤™è¨­è¨ˆ (A11y)

```typescript
// éµç›¤å°èˆªæ”¯æ´
const keyboardNavigation = {
  Tab: 'åœ¨è¡¨å–®æ¬„ä½é–“ç§»å‹•',
  'Ctrl + S': 'å¿«é€Ÿå„²å­˜',
  'Ctrl + N': 'æ–°å¢é …ç›®',
  Escape: 'é—œé–‰æ¨¡æ…‹æ¡†',
  'Arrow Keys': 'åœ¨ç¶²æ ¼ä¸­å°èˆª'
}

// ARIA æ¨™ç±¤
const ariaLabels = {
  productGrid: 'aria-label="å•†å“ç¶²æ ¼"',
  productCard: 'aria-labelledby="product-name" aria-describedby="product-description"',
  actionButton: 'aria-label="ç·¨è¼¯å•†å“" role="button"'
}
```

---

## ğŸ“± åŠŸèƒ½ç‰¹è‰²

### 1. æ™ºèƒ½åŠŸèƒ½ï¼ˆå¾ŒçºŒé–‹ç™¼ï¼‰

#### 1.1 AI è¼”åŠ©å»ºè­°
- **å•†å“å®šåƒ¹å»ºè­°**: åŸºæ–¼æˆæœ¬èˆ‡å¸‚å ´åˆ†æ
- **å¥—é¤çµ„åˆæ¨è–¦**: åŸºæ–¼éŠ·å”®æ•¸æ“šçš„æœ€ä½³çµ„åˆ
- **åˆ†é¡å„ªåŒ–å»ºè­°**: æ ¹æ“šå®¢æˆ¶è¡Œç‚ºå„ªåŒ–åˆ†é¡æ’åº

#### 1.2 è‡ªå‹•åŒ–åŠŸèƒ½
- **åº«å­˜è­¦ç¤º**: å•†å“åº«å­˜ä¸è¶³è‡ªå‹•æé†’
- **åƒ¹æ ¼åŒæ­¥**: æˆæœ¬è®Šå‹•æ™‚è‡ªå‹•å»ºè­°èª¿åƒ¹
- **ç†±é–€å•†å“æ¨™è¨˜**: è‡ªå‹•æ¨™è¨˜ç†±éŠ·å•†å“

### 2. é€²éšåŠŸèƒ½ï¼ˆå¾ŒçºŒé–‹ç™¼ï¼‰

#### 2.1 æ‰¹é‡æ“ä½œ
```typescript
interface BatchOperations {
  selectAll: () => void
  selectCategory: (categoryId: string) => void
  bulkEdit: (changes: Partial<Product>) => Promise<void>
  bulkDelete: (ids: string[]) => Promise<void>
  bulkStatusChange: (ids: string[], status: boolean) => Promise<void>
}
```

#### 2.2 åŒ¯å…¥åŒ¯å‡º
```typescript
interface ImportExport {
  exportProducts: (format: 'csv' | 'xlsx' | 'json') => Promise<Blob>
  importProducts: (file: File) => Promise<ImportResult>
  exportMenu: () => Promise<MenuExport>
  importMenu: (data: MenuImport) => Promise<ImportResult>
}
```

---

## ğŸš€ å¯¦ä½œéšæ®µè¦åŠƒ

### âœ… Phase 1: åŸºç¤æ¶æ§‹ (å·²å®Œæˆ)
- [x] è³‡æ–™åº«æ¶æ§‹åˆ†æ
- [x] Supabase é€£æ¥è¨­å®š  
- [x] TypeScript é¡å‹å®šç¾©
- [x] èœå–®æœå‹™å±¤å»ºç«‹
- [x] Zustand ç‹€æ…‹ç®¡ç†
- [x] åŸºç¤çµ„ä»¶é–‹ç™¼
- [x] è·¯ç”±èˆ‡å°èˆªæ•´åˆ
- [x] ä¸»é é¢å°èˆªå¡ç‰‡

**Phase 1 å®Œæˆå ±å‘Š (2024-12-19)**:
- âœ… å®Œæˆ `menu-types.ts` - å®Œæ•´çš„èœå–®ç®¡ç†é¡å‹å®šç¾©
- âœ… å®Œæˆ `menuService.ts` - Supabase API æ•´åˆæœå‹™å±¤  
- âœ… å®Œæˆ `menuStore.ts` - Zustand ç‹€æ…‹ç®¡ç†èˆ‡æ“ä½œé‚è¼¯
- âœ… å®Œæˆ `MenuManagementPage.tsx` - ä¸»è¦èœå–®ç®¡ç†é é¢æ¡†æ¶
- âœ… å®Œæˆ `App.tsx` è·¯ç”±æ•´åˆ - æ·»åŠ èœå–®ç®¡ç†è·¯ç”±èˆ‡å°èˆª
- âœ… ä¸»é é¢æ–°å¢èœå–®ç®¡ç†å°èˆªå¡ç‰‡ï¼Œä½¿ç”¨ emerald è‰²ç³»

### âœ… Phase 2: å•†å“ç®¡ç† (å·²å®Œæˆ)
- [x] å•†å“åˆ—è¡¨èˆ‡ç¯©é¸ç•Œé¢
- [x] å•†å“å¡ç‰‡çµ„ä»¶è¨­è¨ˆ
- [x] å•†å“ç¶²æ ¼èˆ‡åˆ—è¡¨æª¢è¦–
- [x] ç¯©é¸èˆ‡æœå°‹åŠŸèƒ½
- [x] æ’åºèˆ‡æª¢è¦–æ¨¡å¼åˆ‡æ›
- [x] æ‰¹é‡é¸å–åŠŸèƒ½
- [x] éŸ¿æ‡‰å¼è¨­è¨ˆå¯¦ç¾

**Phase 2 å®Œæˆå ±å‘Š (2024-12-19)**:
- âœ… å®Œæˆ `ProductCard.tsx` - å•†å“å¡ç‰‡å±•ç¤ºçµ„ä»¶
- âœ… å®Œæˆ `ProductFilters.tsx` - å•†å“ç¯©é¸èˆ‡æœå°‹ç•Œé¢
- âœ… å®Œæˆ `ProductGrid.tsx` - å•†å“ç¶²æ ¼å±•ç¤ºèˆ‡ç®¡ç†
- âœ… å®Œæˆ `ProductManagement.tsx` - å•†å“ç®¡ç†ä¸»æ§åˆ¶å™¨
- âœ… æ›´æ–° `MenuManagementPage.tsx` - æ•´åˆå•†å“ç®¡ç†æ¨¡çµ„
- âœ… å¯¦ç¾å®Œæ•´çš„å•†å“å±•ç¤ºã€ç¯©é¸ã€æ’åºåŠŸèƒ½
- âœ… æ”¯æ´ç¶²æ ¼èˆ‡åˆ—è¡¨å…©ç¨®æª¢è¦–æ¨¡å¼
- âœ… éŸ¿æ‡‰å¼è¨­è¨ˆèˆ‡ç„¡éšœç¤™åŠŸèƒ½æ”¯æ´

### âœ… Phase 3: åˆ†é¡ç®¡ç† (å·²å®Œæˆ)
- [x] åˆ†é¡ CRUD åŠŸèƒ½
- [x] åˆ†é¡æ’åºèˆ‡æ‹–æ‹½
- [x] é¡è‰²èˆ‡åœ–ç¤ºé¸æ“‡å™¨
- [x] åˆ†é¡å•†å“çµ±è¨ˆ
- [x] æœå°‹èˆ‡ç¯©é¸åŠŸèƒ½
- [x] æ™ºèƒ½åˆªé™¤ä¿è­·
- [x] å³æ™‚é è¦½åŠŸèƒ½

**Phase 3 å®Œæˆå ±å‘Š (2024-12-19)**:
- âœ… å®Œæˆ `CategoryCard.tsx` - åˆ†é¡å¡ç‰‡å±•ç¤ºçµ„ä»¶
- âœ… å®Œæˆ `CategoryModal.tsx` - åˆ†é¡ç·¨è¼¯æ¨¡æ…‹æ¡†
- âœ… å®Œæˆ `CategoryManagement.tsx` - åˆ†é¡ç®¡ç†ä¸»æ§åˆ¶å™¨
- âœ… æ•´åˆåˆ° `MenuManagementPage.tsx` - å®Œæ•´çš„ Tab å°èˆª
- âœ… å¯¦ç¾å®Œæ•´çš„åˆ†é¡ CRUD æ“ä½œåŠŸèƒ½
- âœ… 30+ åœ–ç¤ºé¸æ“‡å™¨ + ç„¡é™è‰²å½©è‡ªè¨‚
- âœ… æ™ºèƒ½æ’åºèˆ‡æ¥­å‹™é‚è¼¯ä¿è­·
- âœ… æœå°‹ã€çµ±è¨ˆã€å³æ™‚é è¦½åŠŸèƒ½

### âœ… Phase 4: å¥—é¤ç®¡ç† (å·²å®ŒæˆåŸºç¤åŠŸèƒ½)
- âœ… å¥—é¤åŸºç¤åŠŸèƒ½ (ComboCard, ComboModal, ComboManagement)
- âœ… å¥—é¤ CRUD æ“ä½œ
- âœ… å¥—é¤é¡å‹æ”¯æ´ (å›ºå®šå¥—é¤/è‡ªé¸å¥—é¤)
- âœ… çµ±è¨ˆå„€è¡¨æ¿èˆ‡ç¯©é¸ç³»çµ±
- [ ] è¦å‰‡ç·¨è¼¯å™¨ (å¾…é–‹ç™¼)
- [ ] é¸é …è¨­å®šä»‹é¢ (å¾…é–‹ç™¼)
- [ ] é è¦½èˆ‡é©—è­‰ (å¾…é–‹ç™¼)

**Phase 4 åŸºç¤åŠŸèƒ½å®Œæˆå ±å‘Š (2025-08-05)**:
- âœ… å¯¦ç¾äº†å®Œæ•´çš„å¥—é¤ç®¡ç†åŸºç¤æ¶æ§‹
- âœ… åŒ…å« ComboCardã€ComboModalã€ComboManagement ä¸‰å¤§æ ¸å¿ƒçµ„ä»¶
- âœ… æ”¯æ´å¥—é¤é¡å‹è¨­å®šèˆ‡ä¾›æ‡‰ç‹€æ…‹ç®¡ç†
- âœ… æä¾›å¤šç¶­åº¦ç¯©é¸èˆ‡æœå°‹åŠŸèƒ½
- âœ… æ•´åˆçµ±è¨ˆå„€è¡¨æ¿èˆ‡éŸ¿æ‡‰å¼è¨­è¨ˆ

### Phase 5: é€²éšåŠŸèƒ½ (Week 9-10)
- [ ] å³æ™‚åŒæ­¥
- [ ] æ‰¹é‡æ“ä½œ
- [ ] åŒ¯å…¥åŒ¯å‡º
- [ ] AI åŠŸèƒ½æ•´åˆ

### Phase 6: å„ªåŒ–èˆ‡æ¸¬è©¦ (Week 11-12)
- [ ] æ•ˆèƒ½å„ªåŒ–
- [ ] ä½¿ç”¨è€…æ¸¬è©¦
- [ ] éŒ¯èª¤è™•ç†
- [ ] æ–‡æª”å®Œå–„

---

## ğŸ”’ å®‰å…¨æ€§è€ƒé‡

### 1. è³‡æ–™é©—è­‰
```typescript
// å‰ç«¯é©—è­‰
const productValidation = z.object({
  name: z.string().min(1, 'å•†å“åç¨±ä¸èƒ½ç‚ºç©º').max(100, 'å•†å“åç¨±éé•·'),
  price: z.number().min(0, 'åƒ¹æ ¼ä¸èƒ½ç‚ºè² æ•¸').max(999999, 'åƒ¹æ ¼éé«˜'),
  sku: z.string().optional().refine(validateSKU, 'SKU æ ¼å¼éŒ¯èª¤')
})

// å¾Œç«¯ RLS æ”¿ç­–
CREATE POLICY "Users can only access their restaurant's menu"
ON products FOR ALL
TO authenticated
USING (restaurant_id = auth.jwt() ->> 'restaurant_id');
```

### 2. æ¬Šé™æ§åˆ¶
```typescript
interface UserPermissions {
  canViewMenu: boolean
  canEditProducts: boolean
  canCreateCombos: boolean
  canDeleteItems: boolean
  canManageCategories: boolean
  canAccessAnalytics: boolean
}
```

---

## ğŸ“Š æ•ˆèƒ½å„ªåŒ–

### 1. è³‡æ–™è¼‰å…¥å„ªåŒ–
```typescript
// åˆ†é è¼‰å…¥
const useInfiniteProducts = () => {
  return useInfiniteQuery({
    queryKey: ['products', filters],
    queryFn: ({ pageParam = 0 }) => 
      menuService.getProducts({ ...filters, page: pageParam }),
    getNextPageParam: (lastPage) => lastPage.nextPage
  })
}

// å¿«å–ç­–ç•¥
const cacheConfig = {
  staleTime: 5 * 60 * 1000,     // 5 åˆ†é˜
  cacheTime: 10 * 60 * 1000,    // 10 åˆ†é˜
  refetchOnWindowFocus: false
}
```

### 2. åœ–ç‰‡å„ªåŒ–
```typescript
// åœ–ç‰‡å£“ç¸®èˆ‡ CDN
const imageOptimization = {
  compress: true,
  maxWidth: 800,
  maxHeight: 600,
  quality: 0.8,
  format: 'webp',
  cdn: 'supabase-storage'
}
```

---

## ğŸ“‹ æ¸¬è©¦ç­–ç•¥

### 1. å–®å…ƒæ¸¬è©¦
```typescript
// services/menuService.test.ts
describe('MenuService', () => {
  test('should create product successfully', async () => {
    const product = await menuService.createProduct(mockProductData)
    expect(product).toHaveProperty('id')
    expect(product.name).toBe(mockProductData.name)
  })
})
```

### 2. æ•´åˆæ¸¬è©¦
```typescript
// integration/menu-workflow.test.ts
describe('Menu Management Workflow', () => {
  test('should complete full product lifecycle', async () => {
    // å»ºç«‹ -> ç·¨è¼¯ -> åˆªé™¤æµç¨‹æ¸¬è©¦
  })
})
```

### 3. E2E æ¸¬è©¦
```typescript
// e2e/menu-management.spec.ts
test('should manage products end-to-end', async ({ page }) => {
  await page.goto('/menu-management')
  await page.click('[data-testid="add-product"]')
  await page.fill('[data-testid="product-name"]', 'Test Product')
  await page.click('[data-testid="save-product"]')
  await expect(page.locator('[data-testid="product-list"]')).toContainText('Test Product')
})
```

---

## ğŸ¨ è¨­è¨ˆç³»çµ±

### 1. è‰²å½©ç³»çµ±
```css
:root {
  /* ä¸»è¦è‰²å½© */
  --menu-primary: #3B82F6;
  --menu-secondary: #10B981;
  --menu-accent: #F59E0B;
  
  /* ç‹€æ…‹è‰²å½© */
  --menu-success: #22C55E;
  --menu-warning: #F59E0B;
  --menu-error: #EF4444;
  --menu-info: #3B82F6;
  
  /* åˆ†é¡é è¨­è‰²å½© */
  --category-colors: #3B82F6, #10B981, #F59E0B, #EF4444, #8B5CF6;
}
```

### 2. çµ„ä»¶æ¨£å¼
```typescript
// çµ±ä¸€çš„å¡ç‰‡æ¨£å¼
const cardStyles = {
  base: 'bg-white rounded-lg shadow-sm border border-gray-200',
  hover: 'hover:shadow-md transition-shadow duration-200',
  selected: 'ring-2 ring-blue-500 ring-opacity-50'
}

// æŒ‰éˆ•æ¨£å¼ç³»çµ±
const buttonVariants = {
  primary: 'bg-blue-600 text-white hover:bg-blue-700',
  secondary: 'bg-gray-200 text-gray-800 hover:bg-gray-300',
  danger: 'bg-red-600 text-white hover:bg-red-700',
  ghost: 'text-gray-600 hover:bg-gray-100'
}
```

---

## ğŸ“ˆ æˆåŠŸæŒ‡æ¨™

### 1. æŠ€è¡“æŒ‡æ¨™
- **è¼‰å…¥æ™‚é–“**: < 2 ç§’
- **éŸ¿æ‡‰æ™‚é–“**: < 500ms
- **éŒ¯èª¤ç‡**: < 1%
- **å¯ç”¨æ€§**: > 99.9%

### 2. ä½¿ç”¨è€…é«”é©—æŒ‡æ¨™
- **ä»»å‹™å®Œæˆç‡**: > 95%
- **å­¸ç¿’æ›²ç·š**: < 30 åˆ†é˜ä¸Šæ‰‹
- **æ»¿æ„åº¦è©•åˆ†**: > 4.5/5
- **éŒ¯èª¤æ¢å¾©**: < 10 ç§’

### 3. æ¥­å‹™æŒ‡æ¨™
- **èœå–®æ›´æ–°é »ç‡**: æå‡ 200%
- **å¥—é¤å»ºç«‹æ•ˆç‡**: æå‡ 300%
- **ç®¡ç†æ™‚é–“ç¯€çœ**: 50%
- **è³‡æ–™æº–ç¢ºæ€§**: > 98%

---

## ğŸ”® æœªä¾†æ“´å±•

### 1. é€²éšåŠŸèƒ½
- **å¤šèªè¨€èœå–®**: æ”¯æ´å¤šåœ‹èªè¨€
- **ç‡Ÿé¤Šæ¨™ç¤º**: è‡ªå‹•è¨ˆç®—ç‡Ÿé¤Šæˆåˆ†
- **éæ•åŸæ¨™è¨˜**: éæ•åŸè­¦ç¤ºç³»çµ±
- **å­£ç¯€æ€§èœå–®**: æ™‚é–“é™å®šå•†å“

### 2. AI æ™ºèƒ½åŒ–
- **å‹•æ…‹å®šåƒ¹**: AI è‡ªå‹•èª¿æ•´åƒ¹æ ¼
- **éœ€æ±‚é æ¸¬**: é æ¸¬å•†å“éœ€æ±‚é‡
- **å€‹äººåŒ–æ¨è–¦**: ç‚ºå®¢æˆ¶æ¨è–¦å¥—é¤
- **è¶¨å‹¢åˆ†æ**: å¸‚å ´è¶¨å‹¢åˆ†æ

### 3. æ•´åˆåŠŸèƒ½
- **ä¾›æ‡‰å•†æ•´åˆ**: ç›´æ¥å‘ä¾›æ‡‰å•†ä¸‹å–®
- **æˆæœ¬åˆ†æ**: å³æ™‚æˆæœ¬è¨ˆç®—
- **åˆ©æ½¤è¿½è¹¤**: ç²åˆ©åˆ†æå ±å‘Š
- **ç«¶çˆ­åˆ†æ**: å¸‚å ´åƒ¹æ ¼æ¯”è¼ƒ

---

## ğŸ“ çµè«–

æœ¬èœå–®ç®¡ç†é é¢è¨­è¨ˆæä¾›äº†å®Œæ•´çš„å•†å“ç®¡ç†ã€å¥—é¤å»ºç«‹èˆ‡åˆ†é¡ç®¡ç†åŠŸèƒ½ï¼ŒåŸºæ–¼ Supabase çš„å¼·å¤§å¾Œç«¯æ”¯æ´ï¼Œé…åˆç¾ä»£åŒ–çš„å‰ç«¯æŠ€è¡“ï¼Œå°‡ç‚ºé¤å»³ç¶“ç‡Ÿè€…æä¾›é«˜æ•ˆã€ç›´è§€çš„èœå–®ç®¡ç†é«”é©—ã€‚

é€ééšæ®µæ€§çš„é–‹ç™¼è¦åŠƒèˆ‡åš´æ ¼çš„æ¸¬è©¦ç­–ç•¥ï¼Œç¢ºä¿ç³»çµ±çš„ç©©å®šæ€§èˆ‡å¯ç”¨æ€§ï¼ŒåŒæ™‚ç‚ºæœªä¾†çš„åŠŸèƒ½æ“´å±•é ç•™äº†å……è¶³çš„ç©ºé–“ã€‚

**é è¨ˆå®Œæˆæ™‚é–“**: 12 é€±  
**é–‹ç™¼è³‡æº**: 2-3 åå‰ç«¯å·¥ç¨‹å¸« + 1 å UI/UX è¨­è¨ˆå¸«  
**æŠ€è¡“æ£§**: React + TypeScript + Zustand + Supabase + Tailwind CSS

---

*Â© 2024 TanaPOS v4 AI - èœå–®ç®¡ç†ç³»çµ±è¨­è¨ˆæ–‡æª”*
