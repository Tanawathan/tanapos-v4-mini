# ğŸš€ ç«‹å³é è¨‚åŠŸèƒ½ä¿®å¾©æŒ‡å—

## ğŸ“‹ å•é¡Œè¨ºæ–·çµæœ

### âŒ ç™¼ç¾çš„å•é¡Œ
1. **ç¼ºå°‘è³‡æ–™åº«æ¬„ä½**: `table_reservations` è¡¨ç¼ºå°‘ `reservation_type` æ¬„ä½
2. **æœ€å°æå‰æ™‚é–“é™åˆ¶**: ç•¶å‰è¨­å®šç‚º 2 å°æ™‚æå‰é è¨‚
3. **å‰ç«¯æ¬„ä½æ˜ å°„**: é ç´„ç‰©ä»¶ç¼ºå°‘å¿…è¦çš„æ¬„ä½

### ğŸ”§ è§£æ±ºæ–¹æ¡ˆ

#### æ­¥é©Ÿ 1: åŸ·è¡Œ SQL ä¿®å¾©è…³æœ¬
è«‹åˆ° **Supabase SQL ç·¨è¼¯å™¨** åŸ·è¡Œ `fix-reservation-immediate.sql` è…³æœ¬ï¼š

**é—œéµä¿®å¾©å…§å®¹**:
```sql
-- æ·»åŠ ç¼ºå°‘çš„æ¬„ä½
ALTER TABLE public.table_reservations 
ADD COLUMN IF NOT EXISTS reservation_type VARCHAR(50) DEFAULT 'dining';

ALTER TABLE public.table_reservations 
ADD COLUMN IF NOT EXISTS adult_count INTEGER DEFAULT 0;

ALTER TABLE public.table_reservations 
ADD COLUMN IF NOT EXISTS child_count INTEGER DEFAULT 0;

ALTER TABLE public.table_reservations 
ADD COLUMN IF NOT EXISTS child_chair_needed BOOLEAN DEFAULT FALSE;

-- è¨­å®šç«‹å³é è¨‚ï¼ˆ0å°æ™‚æå‰ï¼‰
UPDATE public.restaurants 
SET reservation_settings = jsonb_set(
    reservation_settings,
    '{reservationSettings,minAdvanceBookingHours}',
    '0'::jsonb
)
WHERE id = '11111111-1111-1111-1111-111111111111';
```

#### æ­¥é©Ÿ 2: é©—è­‰ä¿®å¾©
åŸ·è¡Œæ¸¬è©¦è…³æœ¬ç¢ºèªä¿®å¾©æˆåŠŸï¼š
```bash
node test-immediate-booking.cjs
```

## ğŸ¯ ä¿®å¾©å®Œæˆå¾Œçš„åŠŸèƒ½

### âœ… ç«‹å³é è¨‚
- **0 å°æ™‚æå‰é è¨‚**: å¯ä»¥é è¨‚ç•¶ä¸‹æ™‚é–“çš„ä½ç½®
- **å³æ™‚ç”Ÿæ•ˆ**: ä¸éœ€è¦ç­‰å¾…ç¢ºèª

### âœ… å®Œæ•´æ¬„ä½æ”¯æ´
- `reservation_type`: é ç´„é¡å‹ï¼ˆdining, business, etc.ï¼‰
- `adult_count`: æˆäººæ•¸é‡
- `child_count`: å…’ç«¥æ•¸é‡  
- `child_chair_needed`: æ˜¯å¦éœ€è¦å…’ç«¥æ¤…

### âœ… æ™‚æ®µé¡¯ç¤º
- é¡¯ç¤ºç•¶å¤©æ‰€æœ‰ç‡Ÿæ¥­æ™‚æ®µ
- ä¸éæ¿¾å·²éæ™‚é–“ï¼ˆå…è¨±ç«‹å³é è¨‚ï¼‰
- æ­£ç¢ºé¡¯ç¤ºå‰©é¤˜å®¹é‡

## ğŸ“± å‰ç«¯ä½¿ç”¨æ–¹å¼

### ç¾åœ¨å¯ä»¥ï¼š
1. **é¸æ“‡ç•¶å¤©æ—¥æœŸ**
2. **é¸æ“‡ä»»ä½•ç‡Ÿæ¥­æ™‚é–“** (14:00-19:30)
3. **ç«‹å³æäº¤é ç´„** - ç„¡éœ€ç­‰å¾…
4. **ç²å¾—å³æ™‚ç¢ºèª**

### ç‡Ÿæ¥­æ™‚é–“:
- **æ¯æ—¥**: 14:00 - 21:00
- **æœ€æ™šé ç´„**: 19:30
- **ç”¨é¤æ™‚é•·**: 90 åˆ†é˜
- **æ™‚æ®µé–“éš”**: 30 åˆ†é˜

## ğŸ”„ åŸ·è¡Œé †åº

1. **ç«‹å³åŸ·è¡Œ**: `fix-reservation-immediate.sql` (åœ¨ Supabase SQL ç·¨è¼¯å™¨)
2. **é©—è­‰ä¿®å¾©**: `node test-immediate-booking.cjs`
3. **æ¸¬è©¦å‰ç«¯**: é‡æ–°æ•´ç†é ç´„é é¢ä¸¦æ¸¬è©¦

## âš ï¸ æ³¨æ„äº‹é …

- åŸ·è¡Œ SQL å¾Œç«‹å³ç”Ÿæ•ˆï¼Œç„¡éœ€é‡å•Ÿæ‡‰ç”¨ç¨‹å¼
- å·²ä¿®å¾©å‰ç«¯ä»£ç¢¼ä¸­çš„æ¬„ä½æ˜ å°„å•é¡Œ
- æ¸¬è©¦è…³æœ¬æœƒè‡ªå‹•æ¸…ç†æ¸¬è©¦è³‡æ–™

---

**ğŸ‰ ä¿®å¾©å®Œæˆå¾Œï¼Œä½ å°±å¯ä»¥åœ¨ä»»ä½•ç‡Ÿæ¥­æ™‚é–“ç«‹å³é è¨‚ä½ç½®äº†ï¼**

**åŸ·è¡Œç‹€æ…‹**: â³ ç­‰å¾… SQL è…³æœ¬åŸ·è¡Œ  
**é æœŸçµæœ**: âœ… æ”¯æ´ç«‹å³é è¨‚  
**ä¸‹ä¸€æ­¥**: åŸ·è¡Œ `fix-reservation-immediate.sql`
