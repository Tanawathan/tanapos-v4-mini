# **POS 點餐系統：定義與規則**

## **1\. 系統目標**

**POS (Point of Sale) 點餐系統** 的核心目標是提供一個快速、準確且易於操作的介面，以處理顧客的點餐需求。此系統確保所有訂單資訊被正確記錄，並無縫地傳遞至 KDS (廚房顯示系統)，從而最小化人為錯誤、提升出餐速度，並優化顧客的用餐體驗。

## **2\. 核心資料結構**

為了確保流程的精準，系統圍繞以下幾個核心資料結構運作：

* **訂單 (Order):**  
  * **訂單ID (orderId):** 系統生成的唯一訂單號碼。  
  * **桌位ID (tableId):** 與此訂單關聯的桌位。  
  * **訂單狀態 (status):** 描述訂單當前進度的關鍵指標。  
  * **訂單項目 (items):** 一個包含多個 OrderItem 的列表，記錄了所有餐點。  
  * **總金額 (totalAmount):** 訂單的應付總額，由系統自動計算。  
  * **訂單時間 (orderTime):** 訂單建立的時間。  
  * **訂單備註 (orderNotes):** 針對整張訂單的特殊要求。  
* **訂單項目 (OrderItem):**  
  * **項目ID (itemId):** 對應菜單上的 menuItemId。  
  * **項目名稱 (itemName):** 餐點的名稱。  
  * **數量 (quantity):** 所點的份數。  
  * **單價 (unitPrice):** 該餐點的原始價格。  
  * **客製化選項 (customizations):** 一個記錄顧客特殊需求的列表（例如：「去冰」、「不要香菜」）。  
  * **項目小計 (subtotal):** unitPrice 乘以 quantity。  
* **菜單項目 (MenuItem):**  
  * **菜單ID (menuItemId):** 菜單中唯一的產品識別碼。  
  * **名稱 (name):** 產品名稱。  
  * **價格 (price):** 產品的售價。  
  * **分類 (category):** 產品所屬的類別（例如：「主餐」、「飲料」、「開胃菜」）。  
  * **可選配料/做法 (options):** 預設的客製化選項（例如：辣度、甜度、牛排熟度）。  
  * **是否為套餐 (isCombo):** 標示此項目是否為需要進一步選擇內容的套餐。

## **3\. 訂單狀態定義**

每張訂單在其生命週期中，會經歷以下幾種狀態：

* **📝 草稿 (Draft):**  
  * **定義:** 訂單正在建立中，服務人員尚未將其送至廚房。此狀態下的訂單可以任意修改。  
  * **規則:** 這是訂單的初始狀態。如果使用者離開點餐頁面，草稿應被保存或捨棄。  
* **🟡 待處理 (Pending):**  
  * **定義:** 訂單已確認並送出，正在等待廚房接收並開始製作。  
  * **規則:** 訂單一旦進入此狀態，即會顯示在 KDS 上。  
* **🔵 準備中 (Preparing):**  
  * **定義:** 廚房團隊已確認訂單並開始著手準備餐點。  
  * **規則:** 在 KDS 上，廚房人員將訂單標記為「開始製作」後，狀態即轉變為此。  
* **🟢 準備完成 (Ready):**  
  * **定義:** 訂單中的所有餐點均已製作完畢，等待服務人員送餐。  
  * **規則:** KDS 上所有項目均標記為「完成」時，整個訂單狀態更新為此。  
* **📦 已出餐 (Served):**  
  * **定義:** 服務人員已將餐點送達顧客桌上。  
  * **規則:** 服務人員在系統上確認送餐後，狀態更新為此。  
* **✔️ 已完成 (Completed):**  
  * **定義:** 該訂單已結帳並關閉。  
  * **規則:** 這是訂單的最終狀態，表示整個交易流程結束。

## **4\. 點餐標準作業流程 (SOP)**

所有點餐操作必須嚴格遵循以下程序：

1. **啟動點餐:**  
   * **前提:** 桌位狀態必須是 🟡 已入座 (Seated)。  
   * **動作:** 服務人員在 POS 系統選擇該桌位，系統自動創建一張狀態為 📝 草稿 (Draft) 的新訂單，並與該桌位ID關聯。  
2. **加入餐點:**  
   * **動作:** 服務人員透過瀏覽 分類 (category) 或使用搜尋功能找到 菜單項目 (MenuItem)，並將其加入訂單。  
   * **系統反應:** 每加入一個項目，系統即在訂單的 items 列表中創建一個對應的 訂單項目 (OrderItem)，並即時更新 總金額 (totalAmount)。  
3. **處理客製化與套餐:**  
   * **客製化:** 若餐點有預設的 可選配料/做法 (options)，系統應彈出選項供服務人員選擇。手動輸入的特殊需求則記錄於 OrderItem 的 customizations 欄位。  
   * **套餐:** 若選擇的項目 isCombo 為真，系統應啟動套餐選擇流程，引導服務人員完成所有子項目的選擇。  
4. **確認並送單:**  
   * **動作:** 服務人員與顧客覆述訂單內容確認無誤後，點擊「送出訂單」按鈕。  
   * **系統反應:**  
     * 訂單狀態從 📝 草稿 轉變為 🟡 待處理。  
     * 訂單資訊被立即發送至 KDS 系統。  
     * 關聯的 TableStatus (桌位狀態) 從 🟡 已入座 自動更新為 🔵 用餐中。  
5. **加點或修改:**  
   * **前提:** 桌位狀態為 🔵 用餐中。  
   * **動作:** 服務人員可為該桌再次開啟點餐介面。新增的餐點會被加入到一張新的 📝 草稿 訂單中，送出後流程與步驟 4 相同。